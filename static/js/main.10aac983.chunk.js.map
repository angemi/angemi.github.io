{"version":3,"sources":["services/api/globalVariables.js","hooks/useAuth.js","routes/ChangePassword/ChangePassword.js","routes/ConfirmEmailPage/ConfirmEmailPage.js","components/NavBar/NavBar.js","routes/Register/Register.js","components/SecuredRoute/SecuredRoute.js","routes/SignIn/SignIn.js","hooks/useDispatchedActions.js","hooks/useKeyboardShortcut.js","services/api/utils.js","routes/Workspace/constants.js","routes/Workspace/actions.js","routes/Workspace/components/Graph/Graph.js","routes/Workspace/components/Orphanage/Orphanage.js","routes/Workspace/components/WorkspaceDialog/WorkspaceDialog.js","routes/Workspace/Workspace.js","routes/ForgotPassword/ForgotPassword.js","routes/ForgotPasswordConfirmationPage/ForgotPasswordConfirmationPage.js","routes/App/App.js","helpers/formatNodes.js","routes/Workspace/reducer.js","store/app/reducer.js","store/reducers.js","store/store.js","serviceWorker.js","index.js"],"names":["globalVariables","jwtToken","authContext","createContext","useAuth","useContext","AuthProvider","children","Amplify","configure","Auth","mandatorySignIn","region","config","cognito","REGION","userPoolId","USER_POOL_ID","userPoolWebClientId","APP_CLIENT_ID","auth","useState","loggedUser","setLoggedUser","sessionData","setSessionData","history","useHistory","useEffect","a","currentSession","session","currentAuthenticatedUser","user","idToken","console","error","getSession","signIn","username","password","signInUserSession","Promise","resolve","reject","signUp","email","userName","attributes","name","logOut","signOut","then","push","err","isAuthenticated","changePassword","newPassword","resetPassword","forgotPassword","submitNewPassword","code","forgotPasswordSubmit","useProvideAuth","Provider","value","defaultProps","useStyles","makeStyles","wrapper","flexGrow","width","margin","display","justifyContent","flexDirection","padding","header","fontWeight","letterSpacing","errorWrapper","minHeight","successMessage","color","hidden","visibility","form","maxWidth","marginTop","input","marginBottom","buttonWrapper","handleChangeUserProperty","fn","event","target","Register","classes","setPassword","setNewPassword","confirmPassword","setConfirmPassword","setError","confirmMessage","setConfirmMessage","clearPasswordValues","className","Typography","variant","component","onSubmit","e","preventDefault","catch","message","TextField","label","type","onChange","InputProps","startAdornment","InputAdornment","position","required","Button","to","link","ConfirmEmailPage","theme","root","menuButton","marginRight","spacing","title","button","paragraph","NavBar","setUserName","anchorEl","setAnchorEl","open","Boolean","onCloseMenu","AppBar","Toolbar","IconButton","edge","aria-label","align","style","marginLeft","aria-controls","aria-haspopup","onClick","currentTarget","Menu","id","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","onClose","MenuItem","setEmail","SecuredRoute","exact","path","strict","render","SignIn","useDispatchedActions","actions","dispatch","useDispatch","Object","entries","reduce","acc","key","action","blacklistedTargets","keysReducer","state","useKeyboardShortcut","shortcutKeys","callback","Array","isArray","length","Error","initialKeyMapping","currentKeys","useReducer","keys","setKeys","keydownListener","useCallback","keydownEvent","repeat","includes","tagName","keyupListener","keyupEvent","window","addEventListener","removeEventListener","values","filter","setTimeout","getApiElements","url","actionName","axios","interceptors","request","use","headers","Authorization","get","data","payload","postApiElements","newObject","post","deleteApiElement","requestBodyPayload","delete","DIALOG_TYPES","ADD_NODE_URL","ADD_LINK_URL","getGraphData","createNode","newNode","updateNode","updatedNode","updatedObject","put","putApiElement","deleteNode","addLink","newLink","deleteLink","getSpaces","setSpaceSelected","graphContainer","height","alignItems","backdrop","zIndex","GraphWorkspace","selectedGraph","selectedSpaceId","setFocusedNodeId","onRightClickNode","onRightClickLink","fetching","ref","useRef","React","nodes","map","n","links","l","clusters","Set","parseInt","cluster","sort","b","clusterColors","clusterColorOffset","size","clusterDegrees","clusterDegreeOffset","idx","forEach","d3","current","select","remove","svg","append","attr","call","on","transform","defs","merge","node","selectAll","enter","d","this","x","y","source","lables","text","properties","sourceRank","targetRank","join","linkText","circle","transition","duration","force","strength","distance","sourceCluster","targetCluster","o","Math","cos","alpha","sin","minX","Infinity","maxX","minY","maxY","Backdrop","CircularProgress","graphConfig","labelProperty","memo","prevProps","nextProps","isEqual","Orphanage","orphans","spaces","onSetSpaceSelected","handleOpenDialog","Select","labelId","noWrap","Divider","List","onContextMenu","ListItem","ListItemText","primary","WorkspaceDialog","selectedNodeId","dialogOpen","focusedNodeId","focusedLinkId","graphNodes","targetNodeId","handleAddLink","handleChangeTargetNode","handleCloseDialog","handleDeleteLink","handleDeleteNode","handleUpdateNode","onChangeNodeName","handleAddNode","newNodeName","onChangeLinkName","nodeToDeleteName","Dialog","aria-labelledby","DialogTitle","DialogContent","InputLabel","disabled","fullWidth","onKeyPress","DialogActions","autoFocus","contextMenuInitialState","mouseX","mouseY","Workspace","getGraphDataAction","createNodeAction","updateNodeAction","deleteNodeAction","addLinkAction","deleteLinkAction","getSpacesAction","setSpaceSelectedAction","useSelector","workspaceReducer","nodesByIds","shallowEqual","setDialogOpen","setTargetNodeId","setNewNodeName","newLinkName","setNewLinkName","setNodeToDeleteName","contextMenu","setContextMenu","linkContextMenu","setLinkContextMenu","setFocusedLinkId","userSpaces","dialogType","editedNodeName","find","clientX","clientY","Grid","container","item","xs","Container","fixed","Graph","sourceId","targetId","space","anchorReference","anchorPosition","top","left","undefined","infoText","ForgotPassword","ForgotPasswordConfirmationPage","setCode","App","ChangePassword","formatNodes","initialState","spacesByIds","displayedGraph","rawOrphans","graphData","rawNodes","appReducer","reducer","combineReducers","store","createStore","compose","applyMiddleware","thunk","__REDUX_DEVTOOLS_EXTENSION__","f","location","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.10aac983.chunk.js","sourcesContent":["const globalVariables = {\n  jwtToken: '',\n};\n\nexport default globalVariables;\n","/* eslint-disable no-console */\nimport React, { useState, useContext, createContext, useEffect } from 'react';\nimport Amplify, { Auth } from 'aws-amplify';\nimport { useHistory } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nimport globalVariables from 'services/api/globalVariables';\n\nimport config from '../static/config.json';\n\nconst authContext = createContext();\n\nexport const useAuth = () => {\n  return useContext(authContext);\n};\n\nconst useProvideAuth = () => {\n  const [loggedUser, setLoggedUser] = useState(null);\n  const [sessionData, setSessionData] = useState(null);\n  const history = useHistory();\n\n  useEffect(() => {\n    const getSession = async () => {\n      try {\n        const session = await Auth.currentSession();\n        const user = await Auth.currentAuthenticatedUser();\n        const {\n          idToken: { jwtToken },\n        } = session;\n        globalVariables.jwtToken = jwtToken;\n        setSessionData(session);\n        setLoggedUser(user);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n    getSession();\n  }, []);\n\n  const signIn = async (username, password) => {\n    let user;\n    let error;\n    try {\n      user = await Auth.signIn(username, password);\n      const {\n        signInUserSession: {\n          idToken: { jwtToken },\n        },\n      } = user;\n      globalVariables.jwtToken = jwtToken;\n      setLoggedUser(user);\n    } catch (err) {\n      error = err;\n    }\n    return new Promise((resolve, reject) => {\n      if (error) {\n        reject(error);\n      }\n      resolve(user);\n    });\n  };\n\n  const signUp = async (email, password, userName) =>\n    Auth.signUp({ username: email, password, attributes: { name: userName } });\n\n  const getSession = () => Auth.currentSession();\n\n  const logOut = async () => {\n    try {\n      setLoggedUser(null);\n      setSessionData(null);\n      globalVariables.jwtToken = '';\n      Auth.signOut().then(() => history.push('signin'));\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const changePassword = async (password, newPassword) => {\n    const user = await Auth.currentAuthenticatedUser();\n    return Auth.changePassword(user, password, newPassword);\n  };\n\n  const resetPassword = async email => {\n    try {\n      await Auth.forgotPassword(email);\n      history.push('new-password');\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const submitNewPassword = (email, code, password) => {\n    return Auth.forgotPasswordSubmit(email, code, password);\n  };\n\n  const isAuthenticated = () => !!loggedUser;\n\n  return {\n    user: loggedUser,\n    session: sessionData,\n    signIn,\n    signUp,\n    getSession,\n    logOut,\n    isAuthenticated,\n    changePassword,\n    resetPassword,\n    submitNewPassword,\n  };\n};\n\nexport const AuthProvider = ({ children }) => {\n  Amplify.configure({\n    Auth: {\n      mandatorySignIn: true,\n      region: config.cognito.REGION,\n      userPoolId: config.cognito.USER_POOL_ID,\n      userPoolWebClientId: config.cognito.APP_CLIENT_ID,\n    },\n  });\n  const auth = useProvideAuth();\n\n  return <authContext.Provider value={auth}>{children}</authContext.Provider>;\n};\n\nAuthProvider.defaultProps = {\n  children: [],\n};\n\nAuthProvider.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n};\n","import React, { useState } from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport LockIcon from '@material-ui/icons/Lock';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\n\nimport { useAuth } from '../../hooks/useAuth';\n\nconst useStyles = makeStyles({\n  wrapper: {\n    flexGrow: 1,\n    width: '60%',\n    margin: '0 auto',\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'column',\n    padding: '3rem',\n  },\n  header: {\n    fontWeight: 700,\n    letterSpacing: '1.5px',\n  },\n  errorWrapper: {\n    minHeight: '1.5rem',\n  },\n  successMessage: {\n    color: '#4caf50',\n  },\n  hidden: {\n    visibility: 'hidden',\n  },\n  form: {\n    display: 'flex',\n    flexDirection: 'column',\n    maxWidth: '25rem',\n    marginTop: '1rem',\n  },\n  input: {\n    marginBottom: '1.5rem',\n  },\n  buttonWrapper: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n});\n\nconst handleChangeUserProperty = fn => event => {\n  const {\n    target: { value },\n  } = event;\n  fn(value);\n};\n\nconst Register = () => {\n  const classes = useStyles();\n  const { isAuthenticated, changePassword } = useAuth();\n\n  const [password, setPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [error, setError] = useState('');\n  const [confirmMessage, setConfirmMessage] = useState('');\n\n  const clearPasswordValues = () => {\n    setPassword('');\n    setNewPassword('');\n    setConfirmPassword('');\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (error) setError('');\n    if (newPassword === confirmPassword) {\n      changePassword(password, newPassword)\n        .then(() => {\n          clearPasswordValues();\n          setConfirmMessage('Your password has been changed successfully');\n        })\n        .catch(err => {\n          clearPasswordValues();\n          setError(err.message);\n        });\n    } else {\n      setError('Passwords do not match');\n    }\n  };\n\n  if (!isAuthenticated()) {\n    return <Redirect to=\"workspace\" />;\n  }\n\n  return (\n    <div className={classes.wrapper}>\n      <Typography className={classes.header} variant=\"h4\" component=\"h1\" color=\"textPrimary\">\n        Change password\n      </Typography>\n      <div className={classes.errorWrapper}>\n        {error ? (\n          <Typography variant=\"body1\" component=\"p\" color=\"error\">\n            {error}\n          </Typography>\n        ) : (\n          <Typography className={classes.successMessage} variant=\"body1\" component=\"p\">\n            {confirmMessage}\n          </Typography>\n        )}\n      </div>\n      <form className={classes.form} onSubmit={handleSubmit}>\n        <TextField\n          className={classes.input}\n          label=\"CURRENT PASSWORD\"\n          type=\"password\"\n          value={password}\n          onChange={handleChangeUserProperty(setPassword)}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <LockIcon />\n              </InputAdornment>\n            ),\n          }}\n          required\n        />\n        <TextField\n          className={classes.input}\n          label=\"NEW PASSWORD\"\n          type=\"password\"\n          value={newPassword}\n          onChange={handleChangeUserProperty(setNewPassword)}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <LockIcon />\n              </InputAdornment>\n            ),\n          }}\n          required\n        />\n        <TextField\n          className={classes.input}\n          label=\"CONFIRM NEW PASSWORD\"\n          type=\"password\"\n          value={confirmPassword}\n          onChange={handleChangeUserProperty(setConfirmPassword)}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <LockIcon />\n              </InputAdornment>\n            ),\n          }}\n          required\n        />\n        <div className={classes.buttonWrapper}>\n          <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n            Change password\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Register;\n","import React from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\n\nimport { useAuth } from 'hooks/useAuth';\n\nconst useStyles = makeStyles({\n  wrapper: {\n    flexGrow: 1,\n    width: '60%',\n    margin: '0 auto',\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'column',\n    padding: '3rem',\n  },\n  header: {\n    fontWeight: 700,\n    letterSpacing: '1.5px',\n    marginBottom: '1.5rem',\n  },\n  link: {\n    color: 'blue',\n  },\n});\n\nconst ConfirmEmailPage = () => {\n  const classes = useStyles();\n  const { isAuthenticated } = useAuth();\n\n  if (!isAuthenticated()) {\n    return <Redirect to=\"workspace\" />;\n  }\n\n  return (\n    <div className={classes.wrapper}>\n      <Typography className={classes.header} variant=\"h4\" component=\"h1\" color=\"textPrimary\">\n        Your account has been created.\n      </Typography>\n      <Typography variant=\"body1\" component=\"p\" color=\"textPrimary\">\n        Thank you so much for joining Grapher. To finish signing up, you just need to confirm you\n        email address.\n      </Typography>\n    </div>\n  );\n};\n\nexport default ConfirmEmailPage;\n","import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport AppBar from '@material-ui/core/AppBar';\nimport BubbleChart from '@material-ui/icons/BubbleChart';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\n\nimport { useAuth } from '../../hooks/useAuth';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n    color: '#fff',\n  },\n  button: {\n    color: '#fff',\n  },\n  link: {\n    color: 'inherit',\n  },\n  paragraph: {\n    marginRight: '1.5rem',\n  },\n}));\n\nconst NavBar = () => {\n  const [userName, setUserName] = useState('');\n  const [anchorEl, setAnchorEl] = useState(null);\n  const { logOut, user } = useAuth();\n  const classes = useStyles();\n  const open = Boolean(anchorEl);\n\n  useEffect(() => {\n    if (user) {\n      const {\n        attributes: { name },\n      } = user;\n      setUserName(name);\n    }\n  }, [user]);\n\n  const onOpenMenu = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const onCloseMenu = () => {\n    setAnchorEl(null);\n  };\n\n  const onLogOut = () => {\n    setUserName('');\n    onCloseMenu();\n    logOut();\n  };\n\n  return (\n    <AppBar position=\"relative\">\n      <Toolbar>\n        <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\n          <MenuIcon />\n        </IconButton>\n        <Link className={classes.title} to=\"/workspace\">\n          <Typography align=\"center\" variant=\"h6\">\n            Grapher\n            <BubbleChart style={{ marginLeft: '5px' }} />\n          </Typography>\n        </Link>\n\n        {userName ? (\n          <>\n            <Typography className={classes.paragraph} variant=\"body2\">\n              You are logged in as <strong>{userName}</strong>\n            </Typography>\n            <div>\n              <IconButton\n                aria-label=\"account of current user\"\n                aria-controls=\"menu-appbar\"\n                aria-haspopup=\"true\"\n                onClick={onOpenMenu}\n                color=\"inherit\"\n              >\n                <AccountCircle />\n              </IconButton>\n              <Menu\n                id=\"menu-appbar\"\n                anchorEl={anchorEl}\n                anchorOrigin={{\n                  vertical: 'top',\n                  horizontal: 'right',\n                }}\n                keepMounted\n                transformOrigin={{\n                  vertical: 'top',\n                  horizontal: 'right',\n                }}\n                open={open}\n                onClose={onCloseMenu}\n              >\n                <MenuItem onClick={onCloseMenu}>\n                  <Link className={classes.link} to=\"/change-password\">\n                    Change password\n                  </Link>\n                </MenuItem>\n                <MenuItem onClick={onLogOut}>Logout</MenuItem>\n              </Menu>\n            </div>\n          </>\n        ) : (\n          <Link className={classes.button} to=\"/signin\">\n            <Button color=\"inherit\">Login</Button>\n          </Link>\n        )}\n      </Toolbar>\n    </AppBar>\n  );\n};\n\nexport default NavBar;\n","import React, { useState } from 'react';\nimport { useHistory, Redirect } from 'react-router-dom';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport Button from '@material-ui/core/Button';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport LockIcon from '@material-ui/icons/Lock';\nimport MailIcon from '@material-ui/icons/Mail';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\n\nimport { useAuth } from '../../hooks/useAuth';\n\nconst useStyles = makeStyles({\n  wrapper: {\n    flexGrow: 1,\n    width: '60%',\n    margin: '0 auto',\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'column',\n    padding: '3rem',\n  },\n  header: {\n    fontWeight: 700,\n    letterSpacing: '1.5px',\n  },\n  errorWrapper: {\n    minHeight: '1.5rem',\n  },\n  hidden: {\n    visibility: 'hidden',\n  },\n  form: {\n    display: 'flex',\n    flexDirection: 'column',\n    maxWidth: '25rem',\n    marginTop: '1rem',\n  },\n  input: {\n    marginBottom: '1.5rem',\n  },\n  buttonWrapper: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n});\n\nconst handleChangeUserProperty = fn => event => {\n  const {\n    target: { value },\n  } = event;\n  fn(value);\n};\n\nconst Register = () => {\n  const classes = useStyles();\n  const { signUp, isAuthenticated } = useAuth();\n  const history = useHistory();\n\n  const [userName, setUserName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [error, setError] = useState('');\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (error) setError('');\n    if (password === confirmPassword) {\n      signUp(email, password, userName)\n        .then(() => history.push('confirm-email'))\n        .catch(err => setError(err.message));\n    } else {\n      setError('Passwords do not match');\n    }\n  };\n\n  if (isAuthenticated()) {\n    return <Redirect to=\"workspace\" />;\n  }\n\n  return (\n    <div className={classes.wrapper}>\n      <Typography className={classes.header} variant=\"h4\" component=\"h1\" color=\"textPrimary\">\n        Sign up\n      </Typography>\n      <div className={classes.errorWrapper}>\n        <Typography variant=\"body1\" component=\"p\" color=\"error\">\n          {error}\n        </Typography>\n      </div>\n      <form className={classes.form} onSubmit={handleSubmit}>\n        <TextField\n          className={classes.input}\n          label=\"USER NAME\"\n          value={userName}\n          onChange={handleChangeUserProperty(setUserName)}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <AccountCircle />\n              </InputAdornment>\n            ),\n          }}\n          required\n        />\n        <TextField\n          className={classes.input}\n          label=\"E-MAIL\"\n          type=\"email\"\n          value={email}\n          onChange={handleChangeUserProperty(setEmail)}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <MailIcon />\n              </InputAdornment>\n            ),\n          }}\n          required\n        />\n        <TextField\n          className={classes.input}\n          label=\"PASSWORD\"\n          type=\"password\"\n          value={password}\n          onChange={handleChangeUserProperty(setPassword)}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <LockIcon />\n              </InputAdornment>\n            ),\n          }}\n          required\n        />\n        <TextField\n          className={classes.input}\n          label=\"CONFIRM PASSWORD\"\n          type=\"password\"\n          value={confirmPassword}\n          onChange={handleChangeUserProperty(setConfirmPassword)}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <LockIcon />\n              </InputAdornment>\n            ),\n          }}\n          required\n        />\n        <div className={classes.buttonWrapper}>\n          <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n            Sign Up\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Register;\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nimport { useAuth } from '../../hooks/useAuth';\n\nconst SecuredRoute = ({ children, exact, path, strict }) => {\n  const { isAuthenticated } = useAuth();\n\n  return (\n    <Route\n      exact={exact}\n      path={path}\n      render={() => (isAuthenticated() ? <>{children}</> : <Redirect to=\"/signin\" />)}\n      strict={strict}\n    />\n  );\n};\n\nSecuredRoute.defaultProps = {\n  children: [],\n  exact: false,\n  strict: false,\n};\n\nSecuredRoute.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n  exact: PropTypes.bool,\n  path: PropTypes.string.isRequired,\n  strict: PropTypes.bool,\n};\n\nexport default SecuredRoute;\n","import React, { useState } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport LockIcon from '@material-ui/icons/Lock';\nimport MailIcon from '@material-ui/icons/Mail';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\n\nimport { useAuth } from '../../hooks/useAuth';\n\nconst useStyles = makeStyles({\n  wrapper: {\n    flexGrow: 1,\n    width: '60%',\n    margin: '0 auto',\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'column',\n    padding: '3rem',\n  },\n  header: {\n    fontWeight: 700,\n    letterSpacing: '1.5px',\n  },\n  errorWrapper: {\n    minHeight: '1.5rem',\n  },\n  hidden: {\n    visibility: 'hidden',\n  },\n  form: {\n    display: 'flex',\n    flexDirection: 'column',\n    maxWidth: '25rem',\n    marginTop: '1rem',\n    marginBottom: '1rem',\n  },\n  input: {\n    marginBottom: '1.5rem',\n  },\n  buttonWrapper: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n  link: {\n    color: 'inherit',\n  },\n});\n\nconst SignIn = () => {\n  const { signIn, isAuthenticated } = useAuth();\n  const classes = useStyles();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n\n  const handleChangeUserProperty = fn => event => {\n    const {\n      target: { value },\n    } = event;\n    fn(value);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    signIn(email, password).catch(err => setError(err.message));\n  };\n\n  if (isAuthenticated()) {\n    return <Redirect to=\"workspace\" />;\n  }\n\n  return (\n    <div className={classes.wrapper}>\n      <Typography className={classes.header} variant=\"h4\" component=\"h1\" color=\"textPrimary\">\n        Sign up\n      </Typography>\n      <div className={classes.errorWrapper}>\n        <Typography\n          className={!error && classes.hidden}\n          variant=\"body1\"\n          component=\"p\"\n          color=\"error\"\n        >\n          {error}\n        </Typography>\n      </div>\n      <form className={classes.form} onSubmit={handleSubmit}>\n        <TextField\n          className={classes.input}\n          label=\"E-MAIL\"\n          type=\"email\"\n          value={email}\n          onChange={handleChangeUserProperty(setEmail)}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <MailIcon />\n              </InputAdornment>\n            ),\n          }}\n          required\n        />\n        <TextField\n          className={classes.input}\n          label=\"PASSWORD\"\n          type=\"password\"\n          value={password}\n          onChange={handleChangeUserProperty(setPassword)}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <LockIcon />\n              </InputAdornment>\n            ),\n          }}\n          required\n        />\n        <Typography variant=\"body2\" component=\"p\">\n          <Link to=\"/forgot-password\">Forgot password?</Link>\n        </Typography>\n        <div className={classes.buttonWrapper}>\n          <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n            Sign In\n          </Button>\n        </div>\n      </form>\n      <Typography variant=\"subtitle1\" component=\"p\">\n        Don&#39;t you have account? You can <Link to=\"/signup\">Sign Up</Link>.\n      </Typography>\n    </div>\n  );\n};\n\nexport default SignIn;\n","import { useDispatch } from 'react-redux';\n\nconst useDispatchedActions = actions => {\n  const dispatch = useDispatch();\n  return Object.entries(actions).reduce(\n    (acc, [key, action]) => ({\n      ...acc,\n      [key]: (...args) => dispatch(action(...args)),\n    }),\n    {}\n  );\n};\n\nexport default useDispatchedActions;\n","import { useEffect, useReducer, useCallback } from 'react';\n\nconst blacklistedTargets = ['INPUT', 'TEXTAREA'];\n\nconst keysReducer = (state, action) => {\n  switch (action.type) {\n    case 'set-key-down':\n      return { ...state, [action.key]: true };\n    case 'set-key-up':\n      return { ...state, [action.key]: false };\n    default:\n      return state;\n  }\n};\n\nconst useKeyboardShortcut = (shortcutKeys, callback) => {\n  if (!Array.isArray(shortcutKeys) || !shortcutKeys.length) {\n    throw new Error(\n      'The first parameter to `useKeyboardShortcut` must be an array containing at least one `KeyboardEvent.key` string.'\n    );\n  }\n  if (!callback || typeof callback !== 'function') {\n    throw new Error(\n      'The second parameter to `useKeyboardShortcut` must be a function that will be invoked when the keys are pressed.'\n    );\n  }\n\n  const initialKeyMapping = shortcutKeys.reduce(\n    (currentKeys, key) => ({\n      ...currentKeys,\n      [key]: false,\n    }),\n    {}\n  );\n\n  const [keys, setKeys] = useReducer(keysReducer, initialKeyMapping);\n\n  const keydownListener = useCallback(\n    keydownEvent => {\n      const { key, target, repeat } = keydownEvent;\n      if (repeat) return;\n      if (blacklistedTargets.includes(target.tagName)) return;\n      if (!shortcutKeys.includes(key)) return;\n\n      if (!keys[key]) {\n        setKeys({ type: 'set-key-down', key });\n      }\n    },\n    [shortcutKeys, keys]\n  );\n\n  const keyupListener = useCallback(\n    keyupEvent => {\n      const { key, target } = keyupEvent;\n      if (blacklistedTargets.includes(target.tagName)) return;\n      if (!shortcutKeys.includes(key)) return;\n\n      if (keys[key]) {\n        setKeys({ type: 'set-key-up', key });\n      }\n    },\n    [shortcutKeys, keys]\n  );\n\n  useEffect(() => {\n    window.addEventListener('keydown', keydownListener, true);\n\n    return () => window.removeEventListener('keydown', keydownListener, true);\n  }, [keydownListener]);\n\n  useEffect(() => {\n    window.addEventListener('keyup', keyupListener, true);\n\n    return () => window.removeEventListener('keyup', keyupListener, true);\n  }, [keyupListener]);\n\n  useEffect(() => {\n    if (!Object.values(keys).filter(value => !value).length) {\n      setTimeout(() => callback(keys), 250);\n    }\n  }, [callback, keys]);\n};\n\nexport default useKeyboardShortcut;\n","import axios from 'axios'\n\nimport globalVariables from 'services/api/globalVariables'\n\nexport const setRequestConfig = () => {\n  axios.interceptors.request.use(\n    config => {\n      // eslint-disable-next-line no-param-reassign\n      config.headers.Authorization = globalVariables.jwtToken\n        ? `Bearer ${globalVariables.jwtToken}`\n        : ''\n      return config\n    },\n    error => {\n      return Promise.reject(error)\n    }\n  )\n}\n\nexport const getApiElements = (url, actionName) => {\n  setRequestConfig()\n  const headers = {}\n  const request = axios.get(url, headers)\n\n  return dispatch => {\n    dispatch({\n      type: `${actionName}_PENDING`,\n    })\n    return request\n      .then(({ data }) => {\n        dispatch({\n          type: `${actionName}_FULFILLED`,\n          payload: data,\n        })\n        return data\n      })\n      .catch(error => {\n        dispatch({\n          type: `${actionName}_REJECTED`,\n          payload: error.message,\n        })\n      })\n  }\n}\n\nexport const postApiElements = (url, actionName, newObject) => {\n  const request = axios.post(url, newObject)\n  return dispatch => {\n    dispatch({ type: `${actionName}_PENDING` })\n\n    return request\n      .then(({ data }) => {\n        dispatch({\n          type: `${actionName}_FULFILLED`,\n          payload: data,\n        })\n        return data\n      })\n      .catch(error => {\n        dispatch({\n          type: `${actionName}_REJECTED`,\n          payload: error.message,\n        })\n      })\n  }\n}\n\nexport const putApiElement = (url, actionName, updatedObject) => {\n  const request = axios.put(url, updatedObject)\n\n  return dispatch => {\n    dispatch({ type: `${actionName}_PENDING` })\n\n    return request\n      .then(({ data }) => {\n        dispatch({\n          type: `${actionName}_FULFILLED`,\n          payload: data,\n        })\n      })\n      .catch(error => {\n        dispatch({\n          type: `${actionName}_REJECTED`,\n          payload: error.message,\n        })\n      })\n  }\n}\n\nexport const deleteApiElement = (url, actionName, requestBodyPayload) => {\n  const headers = {}\n  const request = axios.delete(url, {\n    ...headers,\n    ...(requestBodyPayload && Object.keys(requestBodyPayload).length > 0\n      ? { data: requestBodyPayload }\n      : {}),\n  })\n\n  return dispatch => {\n    dispatch({\n      type: `${actionName}_PENDING`,\n      payload: requestBodyPayload,\n    })\n\n    return request\n      .then(({ data }) => {\n        dispatch({\n          type: `${actionName}_FULFILLED`,\n          payload: data,\n        })\n      })\n      .catch(error => {\n        dispatch({\n          type: `${actionName}_REJECTED`,\n          payload: error.message,\n        })\n      })\n  }\n}\n","export const FETCH_GRAPH_DATA = 'FETCH_GRAPH_DATA';\nexport const CREATE_NODE = 'CREATE_NODE';\nexport const UPDATE_NODE = 'UPDATE_NODE';\nexport const DELETE_NODE = 'DELETE_NODE';\nexport const ADD_LINK = 'ADD_LINK';\nexport const DELETE_LINK = 'DELETE_LINK';\nexport const FETCH_SPACES = 'GET_SPACES';\nexport const SELECT_SPACE = 'SELECT_SPACE';\n\nexport const DIALOG_TYPES = {\n    ADD_NODE: 'ADD_NODE',\n    ADD_LINKED_NODE: 'ADD_LINKED_NODE',\n    ADD_LINK: 'ADD_LINK',\n    EDIT_NODE: 'EDIT_NODE',\n    REMOVE_NODE: 'REMOVE_NODE',\n    REMOVE_LINK: 'REMOVE_LINK'\n};","import {\n  getApiElements,\n  postApiElements,\n  putApiElement,\n  deleteApiElement,\n} from 'services/api/utils';\nimport {\n  FETCH_GRAPH_DATA,\n  CREATE_NODE,\n  UPDATE_NODE,\n  DELETE_NODE,\n  ADD_LINK,\n  DELETE_LINK,\n  FETCH_SPACES,\n  SELECT_SPACE,\n} from './constants';\n\nconst GET_GRAPH_URL = 'https://grapher-app.herokuapp.com/graphs';\nconst ADD_NODE_URL = 'https://grapher-app.herokuapp.com/graphs/nodes';\nconst ADD_LINK_URL = 'https://grapher-app.herokuapp.com/graphs/links';\nconst GET_SPACES_URL = 'https://grapher-app.herokuapp.com/spaces/my';\n\nexport const getGraphData = id => getApiElements(`${GET_GRAPH_URL}?space=${id}`, FETCH_GRAPH_DATA);\n\nexport const createNode = newNode => postApiElements(ADD_NODE_URL, CREATE_NODE, newNode);\n\nexport const updateNode = updatedNode =>\n  putApiElement(`${ADD_NODE_URL}/${updatedNode.id}`, UPDATE_NODE, updatedNode);\n\nexport const deleteNode = id => deleteApiElement(`${ADD_NODE_URL}/${id}`, DELETE_NODE);\n\nexport const addLink = newLink => postApiElements(ADD_LINK_URL, ADD_LINK, newLink);\n\nexport const deleteLink = id => deleteApiElement(`${ADD_LINK_URL}/${id}`, DELETE_LINK);\n\nexport const getSpaces = () => getApiElements(GET_SPACES_URL, FETCH_SPACES);\n\nexport const setSpaceSelected = id => ({ type: SELECT_SPACE, payload: id });\n","import React, { useRef } from 'react'\nimport PropTypes from 'prop-types'\nimport isEqual from 'lodash/isEqual'\nimport * as d3 from 'd3'\n\nimport Backdrop from '@material-ui/core/Backdrop'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport Typography from '@material-ui/core/Typography'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles({\n  graphContainer: {\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  backdrop: {\n    zIndex: 9999,\n    color: '#fff',\n  },\n})\n\nconst GraphWorkspace = ({\n  selectedGraph,\n  selectedSpaceId,\n  setFocusedNodeId,\n  onRightClickNode,\n  onRightClickLink,\n  fetching,\n}) => {\n  const width = \"100%\"\n  const height = \"100%\"\n  const ref = useRef()\n\n  React.useEffect(() => {\n    const nodes = selectedGraph.nodes.map(n => ({ ...n }))\n    const links = selectedGraph.links.map(l => ({ ...l }))\n    const clusters = new Set(nodes.map(value => parseInt(value.cluster, 10)).sort((a, b) => a - b))\n\n    const clusterColors = {}\n    const clusterColorOffset = 1 / clusters.size\n\n    const clusterDegrees = {}\n    const clusterDegreeOffset = 360 / clusters.size\n    let idx = 1\n    clusters.forEach(value => {\n      clusterColors[value] = d3.interpolatePlasma(clusterColorOffset * idx)\n      clusterDegrees[value] = clusterDegreeOffset * idx\n      idx += 1\n    })\n\n\n    d3.select(ref.current).select(\"svg\").remove()\n\n    const svg = d3.select(ref.current)\n      .append(\"svg\")\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .attr(\"font-size\", 10)\n      .call(d3.zoom().on(\"zoom\", () => {\n        svg.attr(\"transform\", d3.event.transform)\n      }))\n      .append(\"g\")\n\n\n    const defs = svg.append('defs')\n    defs.append('marker')\n      .attr('id', 'arrowhead')\n      .attr('viewBox', '-0 -5 10 10')\n      .attr('refX', '27')\n      .attr('refY', '0')\n      .attr('orient', 'auto')\n      .attr('markerWidth', '6')\n      .attr('markerHeight', '6')\n      .attr('xoverflow', 'visible')\n      .append('svg:path')\n      .attr('d', 'M 0,-5 L 10 ,0 L 0,5')\n      .attr('fill', '#999')\n      .style('stroke', 'none')\n\n    const filter = defs.append('filter')\n      .attr('id', \"dropshadow\")\n      .attr('height', \"200%\")\n      .attr('width', \"200%\")\n      .attr(\"x\", \"-40%\")\n      .attr(\"y\", \"-40%\")\n\n    filter.append('feGaussianBlur')\n      .attr('in', 'SourceAlpha')\n      .attr('stdDeviation', '3')\n\n    filter.append('feOffset')\n      .attr('dx', \"3\")\n      .attr('dy', \"3\")\n      .attr('result', \"offsetblur\")\n\n    filter.append('feComponentTransfer')\n      .append('feFuncA')\n      .attr('type', 'linear')\n      .attr('clope', '0.5')\n\n    const merge = filter.append('feMerge')\n    merge.append('feMergeNode')\n    merge.append('feMergeNode')\n      .attr('in', 'SourceGraphic')\n\n    const node = svg.selectAll(\".node\")\n      .data(nodes)\n      .enter()\n      .append(\"g\")\n      .style('cursor', 'pointer')\n      .on('contextmenu', d => onRightClickNode(d3.event, d.id))\n      .on('click', d => setFocusedNodeId(d.id))\n      .call(d3.drag().on(\"drag\", dragged))\n\n\n    const lables = node.append(\"text\")\n      .text(d => d.properties.name)\n      .attr('dx', d => 8 + d.sourceRank + d.targetRank)\n      .attr('dy', 3)\n\n\n    const link = svg.append(\"g\")\n      .attr(\"stroke\", \"#999\")\n      .style('cursor', 'pointer')\n      .attr(\"stroke-opacity\", 0.6)\n      .selectAll(\"line\")\n      .data(links)\n      .join(\"line\")\n      .attr('marker-end', 'url(#arrowhead)')\n      .on('contextmenu', d => {\n        onRightClickLink(d3.event, d.source.id, d.target.id)\n      })\n\n    const linkText = link.append('text')\n      .attr('class', 'link-label')\n      .attr('text-anchor', 'middle')\n      .attr('x', d => d.x)\n      .attr('y', d => d.y)\n      .text(d => \"fasdfas\")\n\n    const circle = node.append(\"circle\")\n      .attr('style', \"filter:url(#dropshadow)\")\n      .attr(\"fill\", d => clusterColors[d.cluster])\n      .attr(\"class\", \"node\")\n      .attr(\"z\", \"10\")\n      .attr(\"cx\", d => d.x)\n      .attr(\"cy\", d => d.y)\n      .attr(\"r\", d => 5 + d.sourceRank + d.targetRank)\n\n    function dragged(d) {\n      d3.select(this).select(\"circle\").attr(\"cx\", d.x = d3.event.x).attr(\"cy\", d.y = d3.event.y)\n      d3.select(this).select(\"text\").attr(\"x\", d.x = d3.event.x).attr(\"y\", d.y = d3.event.y)\n\n      d.x = d3.event.x\n      d.y = d3.event.y\n\n      link.filter(l => l.source === d).attr(\"x1\", d.x).attr(\"y1\", d.y)\n      link.filter(l => l.target === d).attr(\"x2\", d.x).attr(\"y2\", d.y)\n    }\n\n    svg.style(\"opacity\", 1e-6)\n      .transition()\n      .duration(1000)\n      .style(\"opacity\", 1)\n\n    const force = d3.forceSimulation(nodes)\n      .force(\"charge\", d3.forceManyBody().strength(-580))\n      .force(\"collision\", d3.forceCollide(10))\n      .force(\"x\", d3.forceX().strength(0.1))\n      .force(\"y\", d3.forceY().strength(0.1))\n      .force(\"link\", d3.forceLink(links)\n        .id(d => d.id)\n        .distance(d => {\n          if (d.sourceCluster !== d.targetCluster) {\n            return 100\n          }\n          return 10\n\n        }))\n      .on(\"tick\", tick)\n      .on(\"end\", simulationDone)\n\n\n\n    function tick() {\n      nodes.forEach(o => {\n        o.x += 80 * Math.cos(clusterDegrees[o.cluster]) * force.alpha()\n        o.y += 80 * Math.sin(clusterDegrees[o.cluster]) * force.alpha()\n      })\n\n      circle\n        .attr(\"cx\", d => d.x)\n        .attr(\"cy\", d => d.y)\n\n      link\n        .attr(\"x1\", d => d.source.x)\n        .attr(\"y1\", d => d.source.y)\n        .attr(\"x2\", d => d.target.x)\n        .attr(\"y2\", d => d.target.y)\n\n\n      linkText\n        .attr('x', d => d.x)\n        .attr('y', d => d.y)\n\n      lables\n        .attr(\"x\", d => d.x)\n        .attr(\"y\", d => d.y)\n    }\n\n    function simulationDone() {\n      let minX = Infinity\n      let maxX = -Infinity\n      let minY = Infinity\n      let maxY = -Infinity\n      nodes.forEach(n => {\n        if (n.x < minX) minX = n.x\n\n        if (n.x > maxX) maxX = n.x\n\n        if (n.y < minY) minY = n.y\n\n        if (n.y > maxY) maxY = n.y\n\n      })\n    }\n\n  }, [onRightClickLink, onRightClickNode, selectedGraph, setFocusedNodeId, selectedSpaceId])\n\n  const classes = useStyles()\n  if (!selectedGraph || fetching) {\n    return (\n      <div>\n        <Backdrop className={classes.backdrop} open={fetching}>\n          <CircularProgress color=\"inherit\" />\n        </Backdrop>\n      </div>\n    )\n  }\n\n  if (!selectedGraph.nodes.length) {\n    return (\n      <div style={{ width: '100%', height: '100%', display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center' }}>\n        <Typography variant=\"h4\" color=\"textSecondary\">\n          This graph is empty\n        </Typography>\n        <Typography variant=\"subtitle1\" color=\"textSecondary\">\n          You can add nodes in the panel on the right\n        </Typography>\n      </div>\n    )\n  }\n\n\n  return (\n    <div\n      id='graph'\n      ref={ref}\n      style={{\n        width: \"100%\",\n        height: \"100%\"\n      }}\n    />\n  )\n}\n\nGraphWorkspace.defaultProps = {\n  selectedGraph: {\n    nodes: [],\n    links: [],\n  },\n  graphConfig: {\n    labelProperty: 'name',\n  },\n  fetching: false,\n}\n\nGraphWorkspace.propTypes = {\n  selectedGraph: PropTypes.shape({\n    nodes: PropTypes.array,\n    links: PropTypes.array,\n  }),\n  graphConfig: PropTypes.shape({\n    labelProperty: PropTypes.string,\n  }),\n  onRightClickNode: PropTypes.func.isRequired,\n  onRightClickLink: PropTypes.func.isRequired,\n  setFocusedNodeId: PropTypes.func.isRequired,\n  fetching: PropTypes.bool,\n}\n\nconst areEqual = (prevProps, nextProps) => {\n  return prevProps.selectedSpaceId === nextProps.selectedSpaceId && isEqual(prevProps.selectedGraph, nextProps.selectedGraph)\n}\n\nexport default React.memo(GraphWorkspace, areEqual)","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport Typography from '@material-ui/core/Typography';\n\nimport { DIALOG_TYPES } from 'routes/Workspace/constants';\n\nimport './Orphanage.scss';\n\nconst Orphanage = ({\n  orphans,\n  spaces,\n  selectedSpaceId,\n  onSetSpaceSelected,\n  handleOpenDialog,\n  onRightClickNode,\n  setFocusedNodeId,\n}) => {\n  return (\n    <div className=\"Orphanage\">\n      <div className=\"Orphanage__actions\">\n        <Select\n          labelId=\"Orphanage__select-space\"\n          className=\"Orphanage__select-space\"\n          value={selectedSpaceId || ''}\n          onChange={onSetSpaceSelected}\n        >\n          {spaces?.map(({ id, name }) => (\n            <MenuItem key={id} value={id}>\n              {name}\n            </MenuItem>\n          ))}\n        </Select>\n        <Button\n          className=\"Orphanage__button\"\n          onClick={() => {\n            setFocusedNodeId('');\n            handleOpenDialog(DIALOG_TYPES.ADD_NODE);\n          }}\n          color=\"primary\"\n          variant=\"contained\"\n          size=\"large\"\n        >\n          Add node\n        </Button>\n      </div>\n      <div className=\"Orphanage__wrapper\">\n        <Typography className=\"Orphanage__title\" variant=\"h6\" noWrap>\n          Orphanage\n        </Typography>\n        <Divider className=\"Orphanage__divider\" />\n        <List>\n          {(orphans || []).map(({ id, name }) => (\n            <div key={id} onContextMenu={event => onRightClickNode(event, id)}>\n              <ListItem button>\n                <ListItemText primary={name} />\n              </ListItem>\n            </div>\n          ))}\n        </List>\n      </div>\n    </div>\n  );\n};\n\nOrphanage.defaultProps = {\n  orphans: [],\n  spaces: [],\n  selectedSpaceId: '',\n};\n\nOrphanage.propTypes = {\n  orphans: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.string.isRequired,\n      properties: PropTypes.shape({\n        name: PropTypes.string,\n        space: PropTypes.string,\n      }),\n    })\n  ),\n  handleOpenDialog: PropTypes.func.isRequired,\n  onRightClickNode: PropTypes.func.isRequired,\n  spaces: PropTypes.arrayOf(\n    PropTypes.shape({ id: PropTypes.string.isRequired, name: PropTypes.string.isRequired })\n  ),\n  selectedSpaceId: PropTypes.string,\n  onSetSpaceSelected: PropTypes.func.isRequired,\n  setFocusedNodeId: PropTypes.func.isRequired,\n};\n\nexport default Orphanage;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport { Typography } from '@material-ui/core';\nimport Select from '@material-ui/core/Select';\n\nimport { DIALOG_TYPES } from 'routes/Workspace/constants';\n\nconst getTargetNodes = (nodes, selectedNodeId) => {\n  return nodes.filter(node => node.id !== selectedNodeId);\n};\n\nconst WorkspaceDialog = ({\n  dialogOpen,\n  fetching,\n  focusedNodeId,\n  focusedLinkId,\n  graphNodes,\n  orphans,\n  targetNodeId,\n  handleAddLink,\n  handleChangeTargetNode,\n  handleCloseDialog,\n  handleDeleteLink,\n  handleDeleteNode,\n  handleUpdateNode,\n  onChangeNodeName,\n  handleAddNode,\n  newNodeName,\n  onChangeLinkName,\n  nodeToDeleteName,\n}) => {\n  return (\n    <>\n      <Dialog\n        open={dialogOpen === DIALOG_TYPES.ADD_LINK || dialogOpen === DIALOG_TYPES.REMOVE_LINK}\n        onClose={handleCloseDialog}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">\n          {dialogOpen === DIALOG_TYPES.ADD_LINK ? 'Create new link' : 'Delete link'}\n        </DialogTitle>\n        <DialogContent>\n          <InputLabel id=\"Workspace__source-node-select\">Source node: </InputLabel>\n          <Select\n            labelId=\"Workspace__source-node-select\"\n            className=\"Workspace__add-link-select\"\n            value={focusedNodeId}\n            disabled\n          >\n            {[...graphNodes, ...(orphans || [])].map(({ id, name }) => (\n              <MenuItem key={id} value={id}>\n                {name}\n              </MenuItem>\n            ))}\n          </Select>\n          <InputLabel id=\"Workspace__target-node-select\">Target node: </InputLabel>\n          <Select\n            className=\"Workspace__add-link-select\"\n            labelId=\"Workspace__target-node-select\"\n            value={targetNodeId}\n            onChange={handleChangeTargetNode}\n            disabled={!!focusedLinkId}\n          >\n            {getTargetNodes([...graphNodes, ...(orphans || [])], focusedNodeId).map(\n              ({ id, name }) => (\n                <MenuItem key={id} value={id}>\n                  {name}\n                </MenuItem>\n              )\n            )}\n          </Select>\n          <TextField\n            margin=\"dense\"\n            id=\"link_name\"\n            label=\"Link name\"\n            fullWidth\n            disabled={dialogOpen === DIALOG_TYPES.REMOVE_LINK}\n            onChange={onChangeLinkName}\n            onKeyPress={event => {\n              if (event.key === 'Enter') {\n                handleAddLink();\n              }\n            }}\n          />\n        </DialogContent>\n        <DialogActions>\n          {dialogOpen === DIALOG_TYPES.ADD_LINK ? (\n            <Button\n              onClick={handleAddLink}\n              color=\"primary\"\n              disabled={!targetNodeId || fetching.addLink}\n            >\n              Add link\n            </Button>\n          ) : (\n            <Button onClick={handleDeleteLink} color=\"primary\" disabled={fetching.deleteLink}>\n              Confirm\n            </Button>\n          )}\n          <Button onClick={handleCloseDialog}>Cancel</Button>\n        </DialogActions>\n      </Dialog>\n      <Dialog\n        open={dialogOpen === DIALOG_TYPES.ADD_NODE || dialogOpen === DIALOG_TYPES.ADD_LINKED_NODE}\n        onClose={handleCloseDialog}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Create new node</DialogTitle>\n        <DialogContent>\n          <TextField\n            margin=\"dense\"\n            id=\"name\"\n            label=\"Node name\"\n            fullWidth\n            onChange={onChangeNodeName}\n            onKeyPress={event => {\n              if (event.key === 'Enter') {\n                handleAddNode();\n              }\n            }}\n            autoFocus\n          />\n          {dialogOpen === DIALOG_TYPES.ADD_LINKED_NODE && (\n            <TextField\n              margin=\"dense\"\n              id=\"link_name\"\n              label=\"Link name\"\n              fullWidth\n              onChange={onChangeLinkName}\n              onKeyPress={event => {\n                if (event.key === 'Enter') {\n                  handleAddNode();\n                }\n              }}\n            />\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleAddNode}\n            color=\"primary\"\n            disabled={!newNodeName || fetching.createNode}\n          >\n            Add node\n          </Button>\n          <Button onClick={handleCloseDialog}>Cancel</Button>\n        </DialogActions>\n      </Dialog>\n      <Dialog\n        open={dialogOpen === DIALOG_TYPES.EDIT_NODE}\n        onClose={handleCloseDialog}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Edit node</DialogTitle>\n        <DialogContent>\n          <TextField\n            margin=\"dense\"\n            id=\"name\"\n            label=\"Node name\"\n            value={newNodeName}\n            fullWidth\n            onChange={onChangeNodeName}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button\n            onClick={handleUpdateNode}\n            color=\"primary\"\n            disabled={!newNodeName || fetching.updateNode}\n          >\n            Update\n          </Button>\n          <Button onClick={handleCloseDialog}>Cancel</Button>\n        </DialogActions>\n      </Dialog>\n      <Dialog\n        open={dialogOpen === DIALOG_TYPES.REMOVE_NODE}\n        onClose={handleCloseDialog}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogTitle id=\"form-dialog-title\">Delete node</DialogTitle>\n        <DialogContent>\n          <Typography variant=\"body1\">\n            Do you want to delete node <strong>{nodeToDeleteName}</strong>?\n          </Typography>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleDeleteNode} color=\"primary\">\n            Delete\n          </Button>\n          <Button onClick={handleCloseDialog}>Cancel</Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n};\n\nWorkspaceDialog.defaultProps = {\n  dialogOpen: '',\n  focusedNodeId: '',\n  focusedLinkId: '',\n  graphNodes: [],\n  orphans: [],\n  targetNodeId: '',\n  newNodeName: '',\n  nodeToDeleteName: '',\n};\n\nWorkspaceDialog.propTypes = {\n  dialogOpen: PropTypes.string,\n  fetching: PropTypes.shape({\n    addLink: PropTypes.bool,\n    createNode: PropTypes.bool,\n    deleteLink: PropTypes.bool,\n    updateNode: PropTypes.bool,\n  }).isRequired,\n  focusedNodeId: PropTypes.string,\n  focusedLinkId: PropTypes.string,\n  graphNodes: PropTypes.arrayOf(\n    PropTypes.shape({ id: PropTypes.string.isRequired, name: PropTypes.string.isRequired })\n  ),\n  orphans: PropTypes.arrayOf(\n    PropTypes.shape({ id: PropTypes.string.isRequired, name: PropTypes.string.isRequired })\n  ),\n  targetNodeId: PropTypes.string,\n  handleAddLink: PropTypes.func.isRequired,\n  handleAddNode: PropTypes.func.isRequired,\n  handleChangeTargetNode: PropTypes.func.isRequired,\n  handleCloseDialog: PropTypes.func.isRequired,\n  handleDeleteLink: PropTypes.func.isRequired,\n  handleDeleteNode: PropTypes.func.isRequired,\n  handleUpdateNode: PropTypes.func.isRequired,\n  newNodeName: PropTypes.string,\n  nodeToDeleteName: PropTypes.string,\n  onChangeLinkName: PropTypes.func.isRequired,\n  onChangeNodeName: PropTypes.func.isRequired,\n};\n\nexport default WorkspaceDialog;\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { shallowEqual, useSelector } from 'react-redux';\n\nimport Container from '@material-ui/core/Container';\nimport Grid from '@material-ui/core/Grid';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport { useDispatchedActions, useKeyboardShortcut } from 'hooks';\nimport {\n  getGraphData as getGraphDataAction,\n  createNode as createNodeAction,\n  updateNode as updateNodeAction,\n  deleteNode as deleteNodeAction,\n  addLink as addLinkAction,\n  deleteLink as deleteLinkAction,\n  getSpaces as getSpacesAction,\n  setSpaceSelected as setSpaceSelectedAction,\n} from './actions';\n\nimport Graph from './components/Graph';\nimport Orphanage from './components/Orphanage';\nimport WorkspaceDialog from './components/WorkspaceDialog/WorkspaceDialog';\nimport { DIALOG_TYPES } from './constants';\n\nimport './Workspace.scss';\n\nconst contextMenuInitialState = { mouseX: null, mouseY: null };\n\nconst Workspace = () => {\n  const {\n    getGraphData,\n    createNode,\n    updateNode,\n    deleteNode,\n    addLink,\n    deleteLink,\n    getSpaces,\n    setSpaceSelected,\n  } = useDispatchedActions({\n    getGraphData: getGraphDataAction,\n    createNode: createNodeAction,\n    updateNode: updateNodeAction,\n    deleteNode: deleteNodeAction,\n    addLink: addLinkAction,\n    deleteLink: deleteLinkAction,\n    getSpaces: getSpacesAction,\n    setSpaceSelected: setSpaceSelectedAction,\n  });\n  const { selectedGraph, orphans, nodesByIds, selectedSpaceId, spaces, fetching } = useSelector(\n    ({ workspaceReducer }) => ({\n      selectedGraph: workspaceReducer.selectedGraph,\n      orphans: workspaceReducer.orphans,\n      nodesByIds: workspaceReducer.nodesByIds,\n      selectedSpaceId: workspaceReducer.selectedSpaceId,\n      spaces: workspaceReducer.spaces,\n      fetching: workspaceReducer.fetching,\n    }),\n    shallowEqual\n  );\n  const [dialogOpen, setDialogOpen] = useState('');\n  const [targetNodeId, setTargetNodeId] = useState('');\n  const [newNodeName, setNewNodeName] = useState('');\n  const [newLinkName, setNewLinkName] = useState('');\n  const [nodeToDeleteName, setNodeToDeleteName] = useState('');\n  const [contextMenu, setContextMenu] = useState(contextMenuInitialState);\n  const [linkContextMenu, setLinkContextMenu] = useState(contextMenuInitialState);\n  const [focusedNodeId, setFocusedNodeId] = useState(null);\n  const [focusedLinkId, setFocusedLinkId] = useState(null);\n  const { nodes: graphNodes = [], links = [] } = selectedGraph || {};\n\n  useEffect(() => {\n    const fetchInitialGraphData = () => {\n      getSpaces().then(({ spaces: userSpaces }) => {\n        const [defaultSpace] = userSpaces;\n        const { id } = defaultSpace;\n        setSpaceSelected(id);\n      });\n    };\n    fetchInitialGraphData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (selectedSpaceId) getGraphData(selectedSpaceId);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedSpaceId]);\n\n  const handleOpenDialog = dialogType => {\n    if (dialogType === DIALOG_TYPES.EDIT_NODE) {\n      const editedNodeName = nodesByIds[focusedNodeId].name;\n      setNewNodeName(editedNodeName);\n    }\n    if (dialogType === DIALOG_TYPES.REMOVE_NODE) {\n      const { nodes } = selectedGraph;\n      const { name } = [...nodes, ...orphans].find(({ id }) => id === focusedNodeId);\n      setNodeToDeleteName(name);\n    }\n    setContextMenu(contextMenuInitialState);\n    setLinkContextMenu(contextMenuInitialState);\n    setDialogOpen(dialogType);\n  };\n\n  const handleCloseDialog = () => {\n    setDialogOpen('');\n    if (targetNodeId) setTargetNodeId('');\n    if (newNodeName) setNewNodeName('');\n    if (newLinkName) setNewLinkName('');\n    if (nodeToDeleteName) setNodeToDeleteName('');\n    if (focusedNodeId) setFocusedNodeId('');\n    if (focusedLinkId) setFocusedLinkId('');\n  };\n\n  useKeyboardShortcut(['Shift', 'N'], () => {\n    if (focusedNodeId) setFocusedNodeId('');\n    if (!dialogOpen) setDialogOpen(DIALOG_TYPES.ADD_NODE);\n  });\n\n  useKeyboardShortcut(['Shift', 'K'], () => {\n    if (focusedNodeId && !dialogOpen) {\n      setDialogOpen(DIALOG_TYPES.ADD_LINKED_NODE);\n    }\n  });\n\n  const onChangeNodeName = e => {\n    e.preventDefault();\n    const {\n      target: { value },\n    } = e;\n    setNewNodeName(value);\n  };\n\n  const onChangeLinkName = e => {\n    e.preventDefault();\n    const {\n      target: { value },\n    } = e;\n    setNewLinkName(value);\n  };\n  const handleAddNode = () => {\n    const newNode = {\n      properties: {\n        name: newNodeName,\n        space: selectedSpaceId,\n      },\n    };\n    createNode(newNode)\n      .then(({ id }) => {\n        if (focusedNodeId) {\n          const newLink = {\n            source: focusedNodeId,\n            target: id,\n            properties: {\n              space: selectedSpaceId,\n              type: newLinkName,\n            },\n          };\n          addLink(newLink);\n        }\n      })\n      .then(() => {\n        getGraphData(selectedSpaceId);\n        setNewNodeName('');\n        handleCloseDialog();\n      });\n  };\n\n  const handleChangeTargetNode = e => {\n    const {\n      target: { value },\n    } = e;\n    setTargetNodeId(value);\n  };\n\n  const handleChangeSelectedSpace = e => {\n    const {\n      target: { value },\n    } = e;\n    setSpaceSelected(value);\n  };\n\n  const handleAddLink = () => {\n    const newLink = {\n      source: focusedNodeId,\n      target: targetNodeId,\n      properties: {\n        space: selectedSpaceId,\n        type: newLinkName,\n      },\n    };\n    addLink(newLink).then(() => {\n      getGraphData(selectedSpaceId);\n      handleCloseDialog();\n    });\n  };\n\n  const handleDeleteLink = () => {\n    deleteLink(focusedLinkId).then(() => {\n      getGraphData(selectedSpaceId);\n      handleCloseDialog();\n    });\n  };\n\n  const handleUpdateNode = () => {\n    const { nodes } = selectedGraph;\n    const { id, properties } = [...nodes, ...orphans].find(\n      ({ id: nodeId }) => nodeId === focusedNodeId\n    );\n    const updatedNode = {\n      id,\n      properties: {\n        ...properties,\n        name: newNodeName,\n      },\n    };\n    updateNode(updatedNode).then(() => {\n      getGraphData(selectedSpaceId);\n      handleCloseDialog();\n    });\n  };\n\n  const handleDeleteNode = () => {\n    deleteNode(focusedNodeId).then(() => {\n      getGraphData(selectedSpaceId);\n      handleCloseDialog();\n    });\n  };\n\n  const onRightClickNode = useCallback((event, id) => {\n    event.preventDefault();\n    setFocusedNodeId(id);\n    setContextMenu({ mouseX: event.clientX, mouseY: event.clientY });\n  }, []);\n\n  const onRightClickLink = (event, sourceId, targetId) => {\n    event.preventDefault();\n    const { id, target, source } = links.find(\n      link => link.source === sourceId && link.target === targetId\n    );\n    setFocusedLinkId(id);\n    setFocusedNodeId(source);\n    setTargetNodeId(target);\n    setLinkContextMenu({ mouseX: event.clientX, mouseY: event.clientY });\n  };\n\n  const handleCloseContextMenu = () => {\n    setContextMenu(contextMenuInitialState);\n    setFocusedNodeId(null);\n  };\n\n  const handleCloseLinkContextMenu = () => {\n    setLinkContextMenu(contextMenuInitialState);\n    setFocusedLinkId(null);\n  };\n\n  return (\n    <Grid container className=\"Workspace\" spacing={0}>\n      <Grid item xs={9}>\n        <Container id=\"Workspace__Graph-wrapper\" className=\"Workspace__Graph-wrapper\" fixed>\n          {selectedGraph ? (\n            <Graph\n              fetching={[fetching.selectedGraph, fetching.userSpaces].includes(true)}\n              selectedGraph={selectedGraph}\n              focusedNodeId={focusedNodeId}\n              selectedSpaceId={selectedSpaceId}\n              setFocusedNodeId={setFocusedNodeId}\n              onRightClickNode={onRightClickNode}\n              onRightClickLink={onRightClickLink}\n            />\n          ) : null}\n        </Container>\n        <WorkspaceDialog\n          dialogOpen={dialogOpen}\n          fetching={fetching}\n          focusedNodeId={focusedNodeId}\n          focusedLinkId={focusedLinkId}\n          graphNodes={graphNodes}\n          orphans={orphans}\n          targetNodeId={targetNodeId}\n          onChangeLinkName={onChangeLinkName}\n          handleAddLink={handleAddLink}\n          handleChangeTargetNode={handleChangeTargetNode}\n          handleCloseDialog={handleCloseDialog}\n          handleDeleteLink={handleDeleteLink}\n          handleDeleteNode={handleDeleteNode}\n          handleUpdateNode={handleUpdateNode}\n          onChangeNodeName={onChangeNodeName}\n          handleAddNode={handleAddNode}\n          newNodeName={newNodeName}\n          newLinkName={newLinkName}\n          nodeToDeleteName={nodeToDeleteName}\n        />\n      </Grid>\n      <Grid className=\"Workspace__Graph-wrapper\" item xs={3}>\n        <Orphanage\n          orphans={orphans}\n          spaces={spaces}\n          selectedSpaceId={selectedSpaceId}\n          onSetSpaceSelected={handleChangeSelectedSpace}\n          setFocusedNodeId={setFocusedNodeId}\n          handleOpenDialog={handleOpenDialog}\n          onRightClickNode={onRightClickNode}\n        />\n      </Grid>\n      <Menu\n        keepMounted\n        open={contextMenu.mouseY !== null}\n        onClose={handleCloseContextMenu}\n        anchorReference=\"anchorPosition\"\n        anchorPosition={\n          contextMenu.mouseY !== null && contextMenu.mouseX !== null\n            ? { top: contextMenu.mouseY, left: contextMenu.mouseX }\n            : undefined\n        }\n      >\n        <MenuItem onClick={() => handleOpenDialog(DIALOG_TYPES.ADD_LINK)}>Add Link</MenuItem>\n        <MenuItem onClick={() => handleOpenDialog(DIALOG_TYPES.EDIT_NODE)}>Edit node</MenuItem>\n        <MenuItem onClick={() => handleOpenDialog(DIALOG_TYPES.REMOVE_NODE)}>Delete node</MenuItem>\n      </Menu>\n      <Menu\n        keepMounted\n        open={linkContextMenu.mouseY !== null}\n        onClose={handleCloseLinkContextMenu}\n        anchorReference=\"anchorPosition\"\n        anchorPosition={\n          linkContextMenu.mouseY !== null && linkContextMenu.mouseX !== null\n            ? { top: linkContextMenu.mouseY, left: linkContextMenu.mouseX }\n            : undefined\n        }\n      >\n        <MenuItem onClick={() => handleOpenDialog(DIALOG_TYPES.REMOVE_LINK)}>Delete Link</MenuItem>\n      </Menu>\n    </Grid>\n  );\n};\n\nexport default Workspace;\n","import React, { useState } from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport MailIcon from '@material-ui/icons/Mail';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\n\nimport { useAuth } from '../../hooks/useAuth';\n\nconst useStyles = makeStyles({\n  wrapper: {\n    flexGrow: 1,\n    width: '60%',\n    margin: '0 auto',\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'column',\n    padding: '3rem',\n  },\n  header: {\n    fontWeight: 700,\n    letterSpacing: '1.5px',\n    marginBottom: '.5rem',\n  },\n  infoText: {\n    marginBottom: '1.5rem',\n  },\n  errorWrapper: {\n    minHeight: '1.5rem',\n  },\n  successMessage: {\n    color: '#4caf50',\n  },\n  hidden: {\n    visibility: 'hidden',\n  },\n  form: {\n    display: 'flex',\n    flexDirection: 'column',\n    maxWidth: '25rem',\n    marginTop: '1rem',\n  },\n  input: {\n    marginBottom: '1.5rem',\n  },\n  buttonWrapper: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n});\n\nconst ForgotPassword = () => {\n  const [email, setEmail] = useState('');\n  const { resetPassword, isAuthenticated } = useAuth();\n\n  const classes = useStyles();\n\n  const handleChangeUserProperty = fn => event => {\n    const {\n      target: { value },\n    } = event;\n    fn(value);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (email) {\n      resetPassword(email);\n    }\n  };\n\n  if (isAuthenticated()) {\n    return <Redirect to=\"workspace\" />;\n  }\n\n  return (\n    <div className={classes.wrapper}>\n      <Typography className={classes.header} variant=\"h4\" component=\"h1\" color=\"textPrimary\">\n        Forgot your password?\n      </Typography>\n      <Typography className={classes.infoText} variant=\"body1\" component=\"p\">\n        Please enter the email address associated with your account and we will email you a password\n        reset code.\n      </Typography>\n      <form className={classes.form} onSubmit={handleSubmit}>\n        <TextField\n          className={classes.input}\n          label=\"E-MAIL\"\n          type=\"email\"\n          value={email}\n          onChange={handleChangeUserProperty(setEmail)}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <MailIcon />\n              </InputAdornment>\n            ),\n          }}\n          required\n        />\n        <div className={classes.buttonWrapper}>\n          <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n            Send\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default ForgotPassword;\n","import React, { useState } from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport LockIcon from '@material-ui/icons/Lock';\nimport MailIcon from '@material-ui/icons/Mail';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport VerifiedUserIcon from '@material-ui/icons/VerifiedUser';\n\nimport { useAuth } from '../../hooks/useAuth';\n\nconst useStyles = makeStyles({\n  wrapper: {\n    flexGrow: 1,\n    width: '60%',\n    margin: '0 auto',\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'column',\n    padding: '3rem',\n  },\n  header: {\n    fontWeight: 700,\n    letterSpacing: '1.5px',\n  },\n  errorWrapper: {\n    minHeight: '1.5rem',\n  },\n  successMessage: {\n    color: '#4caf50',\n  },\n  hidden: {\n    visibility: 'hidden',\n  },\n  form: {\n    display: 'flex',\n    flexDirection: 'column',\n    maxWidth: '25rem',\n    marginTop: '1rem',\n  },\n  input: {\n    marginBottom: '1.5rem',\n  },\n  buttonWrapper: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n});\n\nconst handleChangeUserProperty = fn => event => {\n  const {\n    target: { value },\n  } = event;\n  fn(value);\n};\n\nconst ForgotPasswordConfirmationPage = () => {\n  const classes = useStyles();\n  const { isAuthenticated, submitNewPassword } = useAuth();\n\n  const [email, setEmail] = useState('');\n  const [code, setCode] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [error, setError] = useState('');\n  const [confirmMessage, setConfirmMessage] = useState('');\n\n  const clearPasswordValues = () => {\n    setEmail('');\n    setCode('');\n    setNewPassword('');\n    setConfirmPassword('');\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (error) setError('');\n    if (confirmMessage) setConfirmMessage('');\n    if (newPassword === confirmPassword) {\n      submitNewPassword(email, code, newPassword)\n        .then(() => {\n          clearPasswordValues();\n          setConfirmMessage('Your password has been changed successfully');\n        })\n        .catch(err => {\n          setError(err.message);\n        });\n    } else {\n      setError('Passwords do not match');\n    }\n  };\n\n  if (isAuthenticated()) {\n    return <Redirect to=\"workspace\" />;\n  }\n\n  return (\n    <div className={classes.wrapper}>\n      <Typography className={classes.header} variant=\"h4\" component=\"h1\" color=\"textPrimary\">\n        Change password\n      </Typography>\n      <div className={classes.errorWrapper}>\n        {error ? (\n          <Typography variant=\"body1\" component=\"p\" color=\"error\">\n            {error}\n          </Typography>\n        ) : (\n          <Typography className={classes.successMessage} variant=\"body1\" component=\"p\">\n            {confirmMessage}\n          </Typography>\n        )}\n      </div>\n      <form className={classes.form} onSubmit={handleSubmit}>\n        <TextField\n          className={classes.input}\n          label=\"E-MAIL\"\n          type=\"email\"\n          value={email}\n          onChange={handleChangeUserProperty(setEmail)}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <MailIcon />\n              </InputAdornment>\n            ),\n          }}\n          required\n        />\n        <TextField\n          className={classes.input}\n          label=\"VERIFICATION CODE\"\n          type=\"number\"\n          value={code}\n          onChange={handleChangeUserProperty(setCode)}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <VerifiedUserIcon />\n              </InputAdornment>\n            ),\n          }}\n          required\n        />\n        <TextField\n          className={classes.input}\n          label=\"NEW PASSWORD\"\n          type=\"password\"\n          value={newPassword}\n          onChange={handleChangeUserProperty(setNewPassword)}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <LockIcon />\n              </InputAdornment>\n            ),\n          }}\n          required\n        />\n        <TextField\n          className={classes.input}\n          label=\"CONFIRM NEW PASSWORD\"\n          type=\"password\"\n          value={confirmPassword}\n          onChange={handleChangeUserProperty(setConfirmPassword)}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <LockIcon />\n              </InputAdornment>\n            ),\n          }}\n          required\n        />\n        <div className={classes.buttonWrapper}>\n          <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n            Change password\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default ForgotPasswordConfirmationPage;\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\n\nimport ChangePassword from 'routes/ChangePassword';\nimport ConfirmEmailPage from 'routes/ConfirmEmailPage';\nimport NavBar from 'components/NavBar';\nimport Register from 'routes/Register';\nimport SecuredRoute from 'components/SecuredRoute';\nimport SignIn from 'routes/SignIn';\nimport Workspace from 'routes/Workspace';\nimport ForgotPassword from 'routes/ForgotPassword';\nimport ForgotPasswordConfirmationPage from 'routes/ForgotPasswordConfirmationPage';\nimport './App.scss';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <NavBar />\n      <Switch>\n        <Route exact path=\"/signup\" component={Register} />\n        <Route exact path=\"/signin\" component={SignIn} />\n        <Route exact path=\"/confirm-email\" component={ConfirmEmailPage} />\n        <Route exact path=\"/forgot-password\" component={ForgotPassword} />\n        <Route exact path=\"/new-password\" component={ForgotPasswordConfirmationPage} />\n        <SecuredRoute exact path=\"/change-password\">\n          <ChangePassword />\n        </SecuredRoute>\n        <SecuredRoute path=\"/workspace\">\n          <Workspace />\n        </SecuredRoute>\n        <SecuredRoute path=\"/\">\n          <Workspace />\n        </SecuredRoute>\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","const formatNodes = (nodes = []) => nodes.map(node => ({ ...node, name: node.properties.name }));\n\nexport default formatNodes;\n","import {\r\n  FETCH_GRAPH_DATA,\r\n  CREATE_NODE,\r\n  UPDATE_NODE,\r\n  DELETE_NODE,\r\n  ADD_LINK,\r\n  DELETE_LINK,\r\n  FETCH_SPACES,\r\n  SELECT_SPACE,\r\n} from './constants';\r\nimport { formatNodes } from '../../helpers';\r\n\r\nconst initialState = {\r\n  fetching: {\r\n    userSpaces: false,\r\n    selectedGraph: false,\r\n    createNode: false,\r\n    updateNode: false,\r\n    deleteNode: false,\r\n    addLink: false,\r\n    deleteLink: false,\r\n  },\r\n  spaces: null,\r\n  spacesByIds: null,\r\n  selectedSpaceId: null,\r\n  selectedGraph: null,\r\n  orphans: null,\r\n  displayedGraph: null,\r\n  nodesByIds: null,\r\n};\r\n\r\nconst workspaceReducer = (state = initialState, action = {}) => {\r\n  switch (action.type) {\r\n    case `${FETCH_SPACES}_PENDING`:\r\n      return {\r\n        ...state,\r\n        fetching: { ...state.fetching, userSpaces: true },\r\n      };\r\n    case `${FETCH_SPACES}_FULFILLED`: {\r\n      const {\r\n        payload: { spaces },\r\n      } = action;\r\n      const spacesByIds = spaces.reduce((acc, space) => ({ ...acc, [space.id]: { ...space } }), {});\r\n      return {\r\n        ...state,\r\n        spaces,\r\n        spacesByIds,\r\n        fetching: { ...state.fetching, userSpaces: false },\r\n      };\r\n    }\r\n    case `${FETCH_SPACES}_REJECTED`:\r\n      return {\r\n        ...state,\r\n        fetching: { ...state.fetching, userSpaces: false },\r\n      };\r\n    case `${FETCH_GRAPH_DATA}_PENDING`:\r\n      return {\r\n        ...state,\r\n        fetching: { ...state.fetching, selectedGraph: true },\r\n      };\r\n    case `${FETCH_GRAPH_DATA}_FULFILLED`: {\r\n      const { orphans: rawOrphans, ...graphData } = action.payload;\r\n      const { nodes: rawNodes } = graphData;\r\n      const nodes = formatNodes(rawNodes);\r\n      const orphans = formatNodes(rawOrphans);\r\n      const selectedGraph = {\r\n        ...graphData,\r\n        nodes,\r\n        focusedNodeId: '',\r\n      };\r\n      const nodesByIds = [...nodes, ...orphans].reduce(\r\n        (acc, node) => ({ ...acc, [node.id]: { ...node } }),\r\n        {}\r\n      );\r\n      return {\r\n        ...state,\r\n        selectedGraph,\r\n        orphans,\r\n        nodesByIds,\r\n        fetching: { ...state.fetching, selectedGraph: false },\r\n      };\r\n    }\r\n    case `${FETCH_GRAPH_DATA}_REJECTED`:\r\n      return {\r\n        ...state,\r\n        fetching: { ...state.fetching, selectedGraph: false },\r\n      };\r\n    case `${CREATE_NODE}_PENDING`:\r\n      return {\r\n        ...state,\r\n        fetching: {\r\n          ...state.fetching,\r\n          createNode: true,\r\n        },\r\n      };\r\n    case `${CREATE_NODE}_FULFILLED`:\r\n      return {\r\n        ...state,\r\n        fetching: {\r\n          ...state.fetching,\r\n          createNode: false,\r\n        },\r\n      };\r\n    case `${CREATE_NODE}_REJECTED`:\r\n      return {\r\n        ...state,\r\n        fetching: {\r\n          ...state.fetching,\r\n          createNode: false,\r\n        },\r\n      };\r\n    case `${UPDATE_NODE}_PENDING`:\r\n      return {\r\n        ...state,\r\n        fetching: { ...state.fetching, updateNode: true },\r\n      };\r\n    case `${UPDATE_NODE}_FULFILLED`:\r\n      return {\r\n        ...state,\r\n        fetching: { ...state.fetching, updateNode: false },\r\n      };\r\n    case `${UPDATE_NODE}_REJECTED`:\r\n      return {\r\n        ...state,\r\n        fetching: { ...state.fetching, updateNode: false },\r\n      };\r\n    case `${DELETE_NODE}_PENDING`:\r\n      return {\r\n        ...state,\r\n        fetching: { ...state.fetching, deleteNode: true },\r\n      };\r\n    case `${DELETE_NODE}_FULFILLED`:\r\n      return {\r\n        ...state,\r\n        fetching: { ...state.fetching, deleteNode: false },\r\n      };\r\n    case `${DELETE_NODE}_REJECTED`:\r\n      return {\r\n        ...state,\r\n        fetching: { ...state.fetching, deleteNode: false },\r\n      };\r\n    case `${ADD_LINK}_PENDING`:\r\n      return {\r\n        ...state,\r\n        fetching: { ...state.fetching, addLink: true },\r\n      };\r\n    case `${ADD_LINK}_FULFILLED`:\r\n      return {\r\n        ...state,\r\n        fetching: { ...state.fetching, addLink: false },\r\n      };\r\n    case `${ADD_LINK}_REJECTED`:\r\n      return {\r\n        ...state,\r\n        fetching: { ...state.fetching, addLink: false },\r\n      };\r\n    case `${DELETE_LINK}_PENDING`: {\r\n      return {\r\n        ...state,\r\n        fetching: { ...state.fetching, deleteLink: true },\r\n      };\r\n    }\r\n    case `${DELETE_LINK}_FULFILLED`: {\r\n      return {\r\n        ...state,\r\n        fetching: { ...state.fetching, deleteLink: false },\r\n      };\r\n    }\r\n    case `${DELETE_LINK}_REJECTED`: {\r\n      return {\r\n        ...state,\r\n        fetching: { ...state.fetching, deleteLink: false },\r\n      };\r\n    }\r\n    case `${SELECT_SPACE}`:\r\n      return {\r\n        ...state,\r\n        selectedGraph: null,\r\n        selectedSpaceId: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default workspaceReducer;\r\n","const appReducer = (state = {}, action = {}) => {\n  switch (action.type) {\n    default:\n      return state;\n  }\n};\n\nexport default appReducer;\n","import { combineReducers } from 'redux';\n\nimport workspaceReducer from 'routes/Workspace/reducer';\nimport appReducer from './app/reducer';\n\nconst reducer = combineReducers({ appReducer, workspaceReducer });\n\nexport default reducer;\n","import { createStore, applyMiddleware, compose } from 'redux';\nimport thunk from 'redux-thunk';\n\nimport reducer from './reducers';\n\nconst store = createStore(\n  reducer,\n  compose(\n    applyMiddleware(thunk),\n    // eslint-disable-next-line no-underscore-dangle\n    window.__REDUX_DEVTOOLS_EXTENSION__ ? window.__REDUX_DEVTOOLS_EXTENSION__() : f => f\n  )\n);\n\nexport default store;\n","/* eslint-disable no-console */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      // eslint-disable-next-line no-param-reassign\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport { App } from './routes/App';\nimport { AuthProvider } from './hooks/useAuth';\nimport { store } from './store';\nimport * as serviceWorker from './serviceWorker';\nimport './index.scss';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <AuthProvider>\n        <Provider store={store}>\n          <App />\n        </Provider>\n      </AuthProvider>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}