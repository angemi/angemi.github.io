(this["webpackJsonpgrapher-web"]=this["webpackJsonpgrapher-web"]||[]).push([[0],{118:function(e){e.exports=JSON.parse('{"cognito":{"REGION":"eu-central-1","USER_POOL_ID":"eu-central-1_4R5STFv4s","APP_CLIENT_ID":"4kcgmiun7hak72nlruqpu5936d"}}')},233:function(e,t,a){e.exports=a(344)},338:function(e,t,a){},339:function(e,t,a){},340:function(e,t,a){},341:function(e,t,a){},344:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(17),o=a.n(c),i=a(67),l=a(23),s=a(20),u=a(10),p=a(411),m=a(419),d=a(418),f=a(32),h=a.n(f),E=a(435),b=a(89),g=a(30),O=a.n(g),j=a(70),v=a(209),y=a(198),N={jwtToken:""},w=a(118),k=Object(n.createContext)(),S=function(){return Object(n.useContext)(k)},C=function(e){var t=e.children;y.default.configure({Auth:{mandatorySignIn:!0,region:w.cognito.REGION,userPoolId:w.cognito.USER_POOL_ID,userPoolWebClientId:w.cognito.APP_CLIENT_ID}});var a=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),o=Object(u.a)(c,2),i=o[0],l=o[1],p=Object(s.g)();Object(n.useEffect)((function(){(function(){var e=Object(j.a)(O.a.mark((function e(){var t,a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.currentSession();case 3:return t=e.sent,e.next=6,v.a.currentAuthenticatedUser();case 6:a=e.sent,n=t.idToken.jwtToken,N.jwtToken=n,l(t),r(a),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}})()()}),[]);return{user:a,session:i,signIn:function(){var e=Object(j.a)(O.a.mark((function e(t,a){var n,c,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.signIn(t,a);case 3:n=e.sent,o=n.signInUserSession.idToken.jwtToken,N.jwtToken=o,r(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),c=e.t0;case 12:return e.abrupt("return",new Promise((function(e,t){c&&t(c),e(n)})));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),signUp:function(){var e=Object(j.a)(O.a.mark((function e(t,a,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.a.signUp({username:t,password:a,attributes:{name:n}}));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),getSession:function(){return v.a.currentSession()},logOut:function(){var e=Object(j.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r(null),l(null),N.jwtToken="",v.a.signOut().then((function(){return p.push("signin")}))}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),isAuthenticated:function(){return!!a},changePassword:function(){var e=Object(j.a)(O.a.mark((function e(t,a){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.currentAuthenticatedUser();case 2:return n=e.sent,e.abrupt("return",v.a.changePassword(n,t,a));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),resetPassword:function(){var e=Object(j.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.forgotPassword(t);case 3:p.push("new-password"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),submitNewPassword:function(e,t,a){return v.a.forgotPasswordSubmit(e,t,a)}}}();return r.a.createElement(k.Provider,{value:a},t)};C.defaultProps={children:[]};var _=Object(p.a)({wrapper:{flexGrow:1,width:"60%",margin:"0 auto",display:"flex",justifyContent:"center",flexDirection:"column",padding:"3rem"},header:{fontWeight:700,letterSpacing:"1.5px"},errorWrapper:{minHeight:"1.5rem"},successMessage:{color:"#4caf50"},hidden:{visibility:"hidden"},form:{display:"flex",flexDirection:"column",maxWidth:"25rem",marginTop:"1rem"},input:{marginBottom:"1.5rem"},buttonWrapper:{display:"flex",justifyContent:"flex-end"}}),D=function(e){return function(t){var a=t.target.value;e(a)}},x=function(){var e=_(),t=S(),a=t.isAuthenticated,c=t.changePassword,o=Object(n.useState)(""),i=Object(u.a)(o,2),l=i[0],p=i[1],f=Object(n.useState)(""),g=Object(u.a)(f,2),O=g[0],j=g[1],v=Object(n.useState)(""),y=Object(u.a)(v,2),N=y[0],w=y[1],k=Object(n.useState)(""),C=Object(u.a)(k,2),x=C[0],I=C[1],P=Object(n.useState)(""),A=Object(u.a)(P,2),L=A[0],T=A[1],W=function(){p(""),j(""),w("")};return a()?r.a.createElement("div",{className:e.wrapper},r.a.createElement(b.a,{className:e.header,variant:"h4",component:"h1",color:"textPrimary"},"Change password"),r.a.createElement("div",{className:e.errorWrapper},x?r.a.createElement(b.a,{variant:"body1",component:"p",color:"error"},x):r.a.createElement(b.a,{className:e.successMessage,variant:"body1",component:"p"},L)),r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault(),x&&I(""),O===N?c(l,O).then((function(){W(),T("Your password has been changed successfully")})).catch((function(e){W(),I(e.message)})):I("Passwords do not match")}},r.a.createElement(E.a,{className:e.input,label:"CURRENT PASSWORD",type:"password",value:l,onChange:D(p),InputProps:{startAdornment:r.a.createElement(d.a,{position:"start"},r.a.createElement(h.a,null))},required:!0}),r.a.createElement(E.a,{className:e.input,label:"NEW PASSWORD",type:"password",value:O,onChange:D(j),InputProps:{startAdornment:r.a.createElement(d.a,{position:"start"},r.a.createElement(h.a,null))},required:!0}),r.a.createElement(E.a,{className:e.input,label:"CONFIRM NEW PASSWORD",type:"password",value:N,onChange:D(w),InputProps:{startAdornment:r.a.createElement(d.a,{position:"start"},r.a.createElement(h.a,null))},required:!0}),r.a.createElement("div",{className:e.buttonWrapper},r.a.createElement(m.a,{type:"submit",variant:"contained",color:"primary"},"Change password")))):r.a.createElement(s.a,{to:"workspace"})},I=Object(p.a)({wrapper:{flexGrow:1,width:"60%",margin:"0 auto",display:"flex",justifyContent:"center",flexDirection:"column",padding:"3rem"},header:{fontWeight:700,letterSpacing:"1.5px",marginBottom:"1.5rem"},link:{color:"blue"}}),P=function(){var e=I();return(0,S().isAuthenticated)()?r.a.createElement("div",{className:e.wrapper},r.a.createElement(b.a,{className:e.header,variant:"h4",component:"h1",color:"textPrimary"},"Your account has been created."),r.a.createElement(b.a,{variant:"body1",component:"p",color:"textPrimary"},"Thank you so much for joining Grapher. To finish signing up, you just need to confirm you email address.")):r.a.createElement(s.a,{to:"workspace"})},A=a(117),L=a.n(A),T=a(420),W=a(204),R=a.n(W),G=a(422),F=a(210),U=a(203),B=a.n(U),M=a(423),Y=a(421),q=Object(p.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,color:"#fff"},button:{color:"#fff"},link:{color:"inherit"},paragraph:{marginRight:"1.5rem"}}})),H=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),i=Object(u.a)(o,2),s=i[0],p=i[1],d=S(),f=d.logOut,h=d.user,E=q(),g=Boolean(s);Object(n.useEffect)((function(){if(h){var e=h.attributes.name;c(e)}}),[h]);var O=function(){p(null)};return r.a.createElement(T.a,{position:"relative"},r.a.createElement(Y.a,null,r.a.createElement(G.a,{edge:"start",className:E.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(B.a,null)),r.a.createElement(l.b,{className:E.title,to:"/workspace"},r.a.createElement(b.a,{align:"center",variant:"h6"},"Grapher",r.a.createElement(R.a,{style:{marginLeft:"5px"}}))),a?r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{className:E.paragraph,variant:"body2"},"You are logged in as ",r.a.createElement("strong",null,a)),r.a.createElement("div",null,r.a.createElement(G.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){p(e.currentTarget)},color:"inherit"},r.a.createElement(L.a,null)),r.a.createElement(F.a,{id:"menu-appbar",anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:g,onClose:O},r.a.createElement(M.a,{onClick:O},r.a.createElement(l.b,{className:E.link,to:"/change-password"},"Change password")),r.a.createElement(M.a,{onClick:function(){c(""),O(),f()}},"Logout")))):r.a.createElement(l.b,{className:E.button,to:"/signin"},r.a.createElement(m.a,{color:"inherit"},"Login"))))},J=a(50),X=a.n(J),K=Object(p.a)({wrapper:{flexGrow:1,width:"60%",margin:"0 auto",display:"flex",justifyContent:"center",flexDirection:"column",padding:"3rem"},header:{fontWeight:700,letterSpacing:"1.5px"},errorWrapper:{minHeight:"1.5rem"},hidden:{visibility:"hidden"},form:{display:"flex",flexDirection:"column",maxWidth:"25rem",marginTop:"1rem"},input:{marginBottom:"1.5rem"},buttonWrapper:{display:"flex",justifyContent:"flex-end"}}),z=function(e){return function(t){var a=t.target.value;e(a)}},V=function(){var e=K(),t=S(),a=t.signUp,c=t.isAuthenticated,o=Object(s.g)(),i=Object(n.useState)(""),l=Object(u.a)(i,2),p=l[0],f=l[1],g=Object(n.useState)(""),O=Object(u.a)(g,2),j=O[0],v=O[1],y=Object(n.useState)(""),N=Object(u.a)(y,2),w=N[0],k=N[1],C=Object(n.useState)(""),_=Object(u.a)(C,2),D=_[0],x=_[1],I=Object(n.useState)(""),P=Object(u.a)(I,2),A=P[0],T=P[1];return c()?r.a.createElement(s.a,{to:"workspace"}):r.a.createElement("div",{className:e.wrapper},r.a.createElement(b.a,{className:e.header,variant:"h4",component:"h1",color:"textPrimary"},"Sign up"),r.a.createElement("div",{className:e.errorWrapper},r.a.createElement(b.a,{variant:"body1",component:"p",color:"error"},A)),r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault(),A&&T(""),w===D?a(j,w,p).then((function(){return o.push("confirm-email")})).catch((function(e){return T(e.message)})):T("Passwords do not match")}},r.a.createElement(E.a,{className:e.input,label:"USER NAME",value:p,onChange:z(f),InputProps:{startAdornment:r.a.createElement(d.a,{position:"start"},r.a.createElement(L.a,null))},required:!0}),r.a.createElement(E.a,{className:e.input,label:"E-MAIL",type:"email",value:j,onChange:z(v),InputProps:{startAdornment:r.a.createElement(d.a,{position:"start"},r.a.createElement(X.a,null))},required:!0}),r.a.createElement(E.a,{className:e.input,label:"PASSWORD",type:"password",value:w,onChange:z(k),InputProps:{startAdornment:r.a.createElement(d.a,{position:"start"},r.a.createElement(h.a,null))},required:!0}),r.a.createElement(E.a,{className:e.input,label:"CONFIRM PASSWORD",type:"password",value:D,onChange:z(x),InputProps:{startAdornment:r.a.createElement(d.a,{position:"start"},r.a.createElement(h.a,null))},required:!0}),r.a.createElement("div",{className:e.buttonWrapper},r.a.createElement(m.a,{type:"submit",variant:"contained",color:"primary"},"Sign Up"))))},Z=function(e){var t=e.children,a=e.exact,n=e.path,c=e.strict,o=S().isAuthenticated;return r.a.createElement(s.b,{exact:a,path:n,render:function(){return o()?r.a.createElement(r.a.Fragment,null,t):r.a.createElement(s.a,{to:"/signin"})},strict:c})};Z.defaultProps={children:[],exact:!1,strict:!1};var $=Z,Q=Object(p.a)({wrapper:{flexGrow:1,width:"60%",margin:"0 auto",display:"flex",justifyContent:"center",flexDirection:"column",padding:"3rem"},header:{fontWeight:700,letterSpacing:"1.5px"},errorWrapper:{minHeight:"1.5rem"},hidden:{visibility:"hidden"},form:{display:"flex",flexDirection:"column",maxWidth:"25rem",marginTop:"1rem",marginBottom:"1rem"},input:{marginBottom:"1.5rem"},buttonWrapper:{display:"flex",justifyContent:"flex-end"},link:{color:"inherit"}}),ee=function(){var e=S(),t=e.signIn,a=e.isAuthenticated,c=Q(),o=Object(n.useState)(""),i=Object(u.a)(o,2),p=i[0],f=i[1],g=Object(n.useState)(""),O=Object(u.a)(g,2),j=O[0],v=O[1],y=Object(n.useState)(""),N=Object(u.a)(y,2),w=N[0],k=N[1],C=function(e){return function(t){var a=t.target.value;e(a)}};return a()?r.a.createElement(s.a,{to:"workspace"}):r.a.createElement("div",{className:c.wrapper},r.a.createElement(b.a,{className:c.header,variant:"h4",component:"h1",color:"textPrimary"},"Sign up"),r.a.createElement("div",{className:c.errorWrapper},r.a.createElement(b.a,{className:!w&&c.hidden,variant:"body1",component:"p",color:"error"},w)),r.a.createElement("form",{className:c.form,onSubmit:function(e){e.preventDefault(),t(p,j).catch((function(e){return k(e.message)}))}},r.a.createElement(E.a,{className:c.input,label:"E-MAIL",type:"email",value:p,onChange:C(f),InputProps:{startAdornment:r.a.createElement(d.a,{position:"start"},r.a.createElement(X.a,null))},required:!0}),r.a.createElement(E.a,{className:c.input,label:"PASSWORD",type:"password",value:j,onChange:C(v),InputProps:{startAdornment:r.a.createElement(d.a,{position:"start"},r.a.createElement(h.a,null))},required:!0}),r.a.createElement(b.a,{variant:"body2",component:"p"},r.a.createElement(l.b,{to:"/forgot-password"},"Forgot password?")),r.a.createElement("div",{className:c.buttonWrapper},r.a.createElement(m.a,{type:"submit",variant:"contained",color:"primary"},"Sign In"))),r.a.createElement(b.a,{variant:"subtitle1",component:"p"},"Don't you have account? You can ",r.a.createElement(l.b,{to:"/signup"},"Sign Up"),"."))},te=a(3),ae=a(33),ne=a(436),re=a(429),ce=a(430),oe=a(433),ie=a(432),le=a(431),se=a(428),ue=a(437),pe=a(434),me=a(37),de=function(e){var t=Object(i.c)();return Object.entries(e).reduce((function(e,a){var n=Object(u.a)(a,2),r=n[0],c=n[1];return Object(te.a)(Object(te.a)({},e),{},Object(me.a)({},r,(function(){return t(c.apply(void 0,arguments))})))}),{})},fe=["INPUT","TEXTAREA"],he=function(e,t){switch(t.type){case"set-key-down":return Object(te.a)(Object(te.a)({},e),{},Object(me.a)({},t.key,!0));case"set-key-up":return Object(te.a)(Object(te.a)({},e),{},Object(me.a)({},t.key,!1));default:return e}},Ee=function(e,t){if(!Array.isArray(e)||!e.length)throw new Error("The first parameter to `useKeyboardShortcut` must be an array containing at least one `KeyboardEvent.key` string.");if(!t||"function"!==typeof t)throw new Error("The second parameter to `useKeyboardShortcut` must be a function that will be invoked when the keys are pressed.");var a=e.reduce((function(e,t){return Object(te.a)(Object(te.a)({},e),{},Object(me.a)({},t,!1))}),{}),r=Object(n.useReducer)(he,a),c=Object(u.a)(r,2),o=c[0],i=c[1],l=Object(n.useCallback)((function(t){var a=t.key,n=t.target;t.repeat||fe.includes(n.tagName)||e.includes(a)&&(o[a]||i({type:"set-key-down",key:a}))}),[e,o]),s=Object(n.useCallback)((function(t){var a=t.key,n=t.target;fe.includes(n.tagName)||e.includes(a)&&o[a]&&i({type:"set-key-up",key:a})}),[e,o]);Object(n.useEffect)((function(){return window.addEventListener("keydown",l,!0),function(){return window.removeEventListener("keydown",l,!0)}}),[l]),Object(n.useEffect)((function(){return window.addEventListener("keyup",s,!0),function(){return window.removeEventListener("keyup",s,!0)}}),[s]),Object(n.useEffect)((function(){Object.values(o).filter((function(e){return!e})).length||t(o)}),[t,o])},be=a(88),ge=a.n(be),Oe=function(e,t){ge.a.interceptors.request.use((function(e){return e.headers.Authorization=N.jwtToken?"Bearer ".concat(N.jwtToken):"",e}),(function(e){return Promise.reject(e)}));var a=ge.a.get(e,{});return function(e){return e({type:"".concat(t,"_PENDING")}),a.then((function(a){var n=a.data;return e({type:"".concat(t,"_FULFILLED"),payload:n}),n})).catch((function(a){e({type:"".concat(t,"_REJECTED"),payload:a.message})}))}},je=function(e,t,a){var n=ge.a.post(e,a);return function(e){return e({type:"".concat(t,"_PENDING")}),n.then((function(a){var n=a.data;e({type:"".concat(t,"_FULFILLED"),payload:n})})).catch((function(a){e({type:"".concat(t,"_REJECTED"),payload:a.message})}))}},ve=function(e,t,a){var n=ge.a.delete(e,Object(te.a)(Object(te.a)({},{}),a&&Object.keys(a).length>0?{data:a}:{}));return function(e){return e({type:"".concat(t,"_PENDING"),payload:a}),n.then((function(a){var n=a.data;e({type:"".concat(t,"_FULFILLED"),payload:n})})).catch((function(a){e({type:"".concat(t,"_REJECTED"),payload:a.message})}))}},ye="https://grapher-app.herokuapp.com/graphs/nodes",Ne="https://grapher-app.herokuapp.com/graphs/links",we=function(e){return Oe("".concat("https://grapher-app.herokuapp.com/graphs","?space=").concat(e),"FETCH_GRAPH_DATA")},ke=function(e){return je(ye,"CREATE_NODE",e)},Se=function(e){return function(e,t,a){var n=ge.a.put(e,a);return function(e){return e({type:"".concat(t,"_PENDING")}),n.then((function(a){var n=a.data;e({type:"".concat(t,"_PENDING"),payload:n})})).catch((function(a){e({type:"".concat(t,"_REJECTED"),payload:a.message})}))}}("".concat(ye,"/").concat(e.id),"UPDATE_NODE",e)},Ce=function(e){return ve("".concat(ye,"/").concat(e),"DELETE_NODE")},_e=function(e){return je(Ne,"ADD_LINK",e)},De=function(e){return ve("".concat(Ne,"/").concat(e),"DELETE_LINK")},xe=function(){return Oe("https://grapher-app.herokuapp.com/spaces/my","GET_SPACES")},Ie=function(e){return{type:"SELECT_SPACE",payload:e}},Pe=a(205),Ae=a(347),Le=a(425),Te=Object(p.a)({graphContainer:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},backdrop:{zIndex:9999,color:"#fff"}}),We=function(e){var t=e.selectedGraph,a=e.graphConfig,n=e.onRightClickNode,c=e.onRightClickLink,o=e.fetching,i=Te(),l=t.nodes;return o&&!t?r.a.createElement("div",{className:i.graphContainer},r.a.createElement(Ae.a,{className:i.backdrop,open:o},r.a.createElement(Le.a,{color:"inherit"}))):l.length?r.a.createElement(Pe.Graph,{id:"graph",className:"Workspace__Graph",data:t,config:a,onRightClickNode:n,onRightClickLink:c}):r.a.createElement("div",{className:i.graphContainer},r.a.createElement(b.a,{variant:"h4",color:"textSecondary"},"This graph is empty"),r.a.createElement(b.a,{variant:"subtitle1",color:"textSecondary"},"You can add nodes in the panel on the right"))};We.defaultProps={selectedGraph:{nodes:[],edges:[]},graphConfig:{labelProperty:"name"},fetching:!1};var Re=We,Ge=a(426),Fe=a(417),Ue=a(346),Be=a(427),Me=(a(338),function(e){var t=e.orphans,a=e.spaces,n=e.selectedSpaceId,c=e.onSetSpaceSelected,o=e.handleOpenDialog,i=e.onRightClickNode;return r.a.createElement("div",{className:"Orphanage"},r.a.createElement("div",{className:"Orphanage__actions"},r.a.createElement(pe.a,{labelId:"Orphanage__select-space",className:"Orphanage__select-space",value:n||"",onChange:c},null===a||void 0===a?void 0:a.map((function(e){var t=e.id,a=e.name;return r.a.createElement(M.a,{key:t,value:t},a)}))),r.a.createElement(m.a,{className:"Orphanage__button",onClick:o,color:"primary",variant:"contained",size:"large"},"Add node")),r.a.createElement("div",{className:"Orphanage__wrapper"},r.a.createElement(b.a,{className:"Orphanage__title",variant:"h6",noWrap:!0},"Orphanage"),r.a.createElement(Ge.a,{className:"Orphanage__divider"}),r.a.createElement(Fe.a,null,(t||[]).map((function(e){var t=e.id,a=e.name;return r.a.createElement("div",{key:t,onContextMenu:function(e){return i(e,t)}},r.a.createElement(Ue.a,{button:!0},r.a.createElement(Be.a,{primary:a})))})))))});Me.defaultProps={orphans:[],spaces:[],selectedSpaceId:""};var Ye=Me,qe=(a(339),{automaticRearrangeAfterDropNode:!1,collapsible:!0,directed:!0,nodeHighlightBehavior:!0,linkHighlightBehavior:!0,minZoom:1,d3:{gravity:-500},node:{labelProperty:"name",color:"#d3d3d3",fontColor:"black",fontSize:8,fontWeight:"normal",highlightColor:"#3f51b5",highlightFontSize:8,highlightFontWeight:"normal",highlightStrokeColor:"SAME",highlightStrokeWidth:"SAME",mouseCursor:"pointer",opacity:1,size:200,strokeColor:"none",strokeWidth:1.5,symbolType:"circle"},link:{highlightColor:"black"}}),He={mouseX:null,mouseY:null},Je=function(){var e=de({getGraphData:we,createNode:ke,updateNode:Se,deleteNode:Ce,addLink:_e,deleteLink:De,getSpaces:xe,setSpaceSelected:Ie}),t=e.getGraphData,a=e.createNode,c=e.updateNode,o=e.deleteNode,l=e.addLink,s=e.deleteLink,p=e.getSpaces,d=e.setSpaceSelected,f=Object(i.d)((function(e){var t=e.workspaceReducer;return{selectedGraph:t.selectedGraph,orphans:t.orphans,nodesByIds:t.nodesByIds,selectedSpaceId:t.selectedSpaceId,spaces:t.spaces,fetching:t.fetching}}),i.b),h=f.selectedGraph,g=f.orphans,O=f.nodesByIds,j=f.selectedSpaceId,v=f.spaces,y=f.fetching,N=Object(n.useState)(!1),w=Object(u.a)(N,2),k=w[0],S=w[1],C=Object(n.useState)(!1),_=Object(u.a)(C,2),D=_[0],x=_[1],I=Object(n.useState)(!1),P=Object(u.a)(I,2),A=P[0],L=P[1],T=Object(n.useState)(!1),W=Object(u.a)(T,2),R=W[0],G=W[1],U=Object(n.useState)(""),B=Object(u.a)(U,2),Y=B[0],q=B[1],H=Object(n.useState)(""),J=Object(u.a)(H,2),X=J[0],K=J[1],z=Object(n.useState)(""),V=Object(u.a)(z,2),Z=V[0],$=V[1],Q=Object(n.useState)(He),ee=Object(u.a)(Q,2),me=ee[0],fe=ee[1],he=Object(n.useState)(He),be=Object(u.a)(he,2),ge=be[0],Oe=be[1],je=Object(n.useState)(null),ve=Object(u.a)(je,2),ye=ve[0],Ne=ve[1],Pe=Object(n.useState)(null),Ae=Object(u.a)(Pe,2),Le=Ae[0],Te=Ae[1],We=h||{},Ge=We.nodes,Fe=void 0===Ge?[]:Ge,Ue=We.links,Be=void 0===Ue?[]:Ue;Object(n.useEffect)((function(){p().then((function(e){var t=e.spaces,a=Object(u.a)(t,1)[0].id;d(a)}))}),[]),Object(n.useEffect)((function(){j&&t(j)}),[j]);var Me=function(){return S(!0)},Je=function(){S(!1),K("")},Xe=function(){x(!1),K(""),Ne(null)},Ke=function(){L(!1),$(""),Ne(null)},ze=function(){fe(He),G(!0)},Ve=function(){G(!1),Ne(""),Te(""),q("")};Ee(["Shift","N"],(function(){k||Me()}));var Ze,$e,Qe=function(e){e.preventDefault();var t=e.target.value;K(t)},et=function(e,t){e.preventDefault(),Ne(t),fe({mouseX:e.clientX,mouseY:e.clientY})},tt=document.getElementById("Workspace__Graph-wrapper");return r.a.createElement(se.a,{container:!0,className:"Workspace",spacing:0},r.a.createElement(se.a,{item:!0,xs:9},r.a.createElement(re.a,{id:"Workspace__Graph-wrapper",className:"Workspace__Graph-wrapper",fixed:!0},h&&tt&&r.a.createElement(Re,{fetching:[y.selectedGraph,y.userSpaces].includes(!0),selectedGraph:h,graphConfig:Object(te.a)(Object(te.a)({},qe),{},{width:tt.offsetWidth,height:tt.offsetHeight}),onRightClickNode:et,onRightClickLink:function(e,t,a){e.preventDefault();var n=Be.find((function(e){return e.source===t&&e.target===a})),r=n.id,c=n.target,o=n.source;Te(r),Ne(o),q(c),Oe({mouseX:e.clientX,mouseY:e.clientY})}})),r.a.createElement(ce.a,{open:R,onClose:Ve,"aria-labelledby":"form-dialog-title"},r.a.createElement(le.a,{id:"form-dialog-title"},Le?"Delete link":"Create new link"),r.a.createElement(ie.a,null,r.a.createElement(ue.a,{id:"Workspace__source-node-select"},"Source node: "),r.a.createElement(pe.a,{labelId:"Workspace__source-node-select",className:"Workspace__add-link-select",value:ye,disabled:!0},[].concat(Object(ae.a)(Fe),Object(ae.a)(g||[])).map((function(e){var t=e.id,a=e.name;return r.a.createElement(M.a,{key:t,value:t},a)}))),r.a.createElement(ue.a,{id:"Workspace__target-node-select"},"Target node: "),r.a.createElement(pe.a,{className:"Workspace__add-link-select",labelId:"Workspace__target-node-select",value:Y,onChange:function(e){var t=e.target.value;q(t)},disabled:!!Le},(Ze=[].concat(Object(ae.a)(Fe),Object(ae.a)(g||[])),$e=ye,Ze.filter((function(e){return e.id!==$e}))).map((function(e){var t=e.id,a=e.name;return r.a.createElement(M.a,{key:t,value:t},a)})))),r.a.createElement(oe.a,null,Le?r.a.createElement(m.a,{onClick:function(){s(Le).then((function(){t(j),Ve()}))},color:"primary",disabled:y.deleteLink},"Confirm"):r.a.createElement(m.a,{onClick:function(){var e=Object(ne.a)();l({id:e,source:ye,target:Y,properties:{space:j,type:"API"}}).then((function(){t(j),Ve()}))},color:"primary",disabled:!Y||y.addLink},"Add link"),r.a.createElement(m.a,{onClick:Ve},"Cancel"))),r.a.createElement(ce.a,{open:k,onClose:Je,"aria-labelledby":"form-dialog-title"},r.a.createElement(le.a,{id:"form-dialog-title"},"Create new node"),r.a.createElement(ie.a,null,r.a.createElement(E.a,{margin:"dense",id:"name",label:"Node name",fullWidth:!0,onChange:Qe})),r.a.createElement(oe.a,null,r.a.createElement(m.a,{onClick:function(){a({properties:{name:X,space:j}}).then((function(){t(j),K(""),Je()}))},color:"primary",disabled:!X||y.createNode},"Add node"),r.a.createElement(m.a,{onClick:Je},"Cancel"))),r.a.createElement(ce.a,{open:D,onClose:Je,"aria-labelledby":"form-dialog-title"},r.a.createElement(le.a,{id:"form-dialog-title"},"Edit node"),r.a.createElement(ie.a,null,r.a.createElement(E.a,{margin:"dense",id:"name",label:"Node name",value:X,fullWidth:!0,onChange:Qe})),r.a.createElement(oe.a,null,r.a.createElement(m.a,{onClick:function(){var e=h.nodes,a=[].concat(Object(ae.a)(e),Object(ae.a)(g)).find((function(e){return e.id===ye})),n=a.id,r=a.properties,o={id:n,properties:Object(te.a)(Object(te.a)({},r),{},{name:X})};c(o).then((function(){t(j),Xe()}))},color:"primary",disabled:!X||y.updateNode},"Update"),r.a.createElement(m.a,{onClick:Xe},"Cancel"))),r.a.createElement(ce.a,{open:A,onClose:Ke,"aria-labelledby":"form-dialog-title"},r.a.createElement(le.a,{id:"form-dialog-title"},"Delete node"),r.a.createElement(ie.a,null,r.a.createElement(b.a,{variant:"body1"},"Do you want to delete node ",r.a.createElement("strong",null,Z),"?")),r.a.createElement(oe.a,null,r.a.createElement(m.a,{onClick:function(){o(ye).then((function(){t(j),Ke()}))},color:"primary"},"Delete"),r.a.createElement(m.a,{onClick:Ke},"Cancel")))),r.a.createElement(se.a,{className:"Workspace__Graph-wrapper",item:!0,xs:3},r.a.createElement(Ye,{orphans:g,spaces:v,selectedSpaceId:j,onSetSpaceSelected:function(e){var t=e.target.value;d(t)},handleOpenDialog:Me,onRightClickNode:et})),r.a.createElement(F.a,{keepMounted:!0,open:null!==me.mouseY,onClose:function(){fe(He),Ne(null)},anchorReference:"anchorPosition",anchorPosition:null!==me.mouseY&&null!==me.mouseX?{top:me.mouseY,left:me.mouseX}:void 0},r.a.createElement(M.a,{onClick:ze},"Add Link"),r.a.createElement(M.a,{onClick:function(){var e=O[ye].name;fe(He),K(e),x(!0)}},"Edit node"),r.a.createElement(M.a,{onClick:function(){var e=h.nodes,t=[].concat(Object(ae.a)(e),Object(ae.a)(g)).find((function(e){return e.id===ye})).name;$(t),fe(He),L(!0)}},"Delete node")),r.a.createElement(F.a,{keepMounted:!0,open:null!==ge.mouseY,onClose:function(){Oe(He),Te(null)},anchorReference:"anchorPosition",anchorPosition:null!==ge.mouseY&&null!==ge.mouseX?{top:ge.mouseY,left:ge.mouseX}:void 0},r.a.createElement(M.a,{onClick:function(){Oe(He),ze()}},"Delete Link")))},Xe=Object(p.a)({wrapper:{flexGrow:1,width:"60%",margin:"0 auto",display:"flex",justifyContent:"center",flexDirection:"column",padding:"3rem"},header:{fontWeight:700,letterSpacing:"1.5px",marginBottom:".5rem"},infoText:{marginBottom:"1.5rem"},errorWrapper:{minHeight:"1.5rem"},successMessage:{color:"#4caf50"},hidden:{visibility:"hidden"},form:{display:"flex",flexDirection:"column",maxWidth:"25rem",marginTop:"1rem"},input:{marginBottom:"1.5rem"},buttonWrapper:{display:"flex",justifyContent:"flex-end"}}),Ke=function(){var e,t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],o=a[1],i=S(),l=i.resetPassword,p=i.isAuthenticated,f=Xe();return p()?r.a.createElement(s.a,{to:"workspace"}):r.a.createElement("div",{className:f.wrapper},r.a.createElement(b.a,{className:f.header,variant:"h4",component:"h1",color:"textPrimary"},"Forgot your password?"),r.a.createElement(b.a,{className:f.infoText,variant:"body1",component:"p"},"Please enter the email address associated with your account and we will email you a password reset code."),r.a.createElement("form",{className:f.form,onSubmit:function(e){e.preventDefault(),c&&l(c)}},r.a.createElement(E.a,{className:f.input,label:"E-MAIL",type:"email",value:c,onChange:(e=o,function(t){var a=t.target.value;e(a)}),InputProps:{startAdornment:r.a.createElement(d.a,{position:"start"},r.a.createElement(X.a,null))},required:!0}),r.a.createElement("div",{className:f.buttonWrapper},r.a.createElement(m.a,{type:"submit",variant:"contained",color:"primary"},"Send"))))},ze=a(207),Ve=a.n(ze),Ze=Object(p.a)({wrapper:{flexGrow:1,width:"60%",margin:"0 auto",display:"flex",justifyContent:"center",flexDirection:"column",padding:"3rem"},header:{fontWeight:700,letterSpacing:"1.5px"},errorWrapper:{minHeight:"1.5rem"},successMessage:{color:"#4caf50"},hidden:{visibility:"hidden"},form:{display:"flex",flexDirection:"column",maxWidth:"25rem",marginTop:"1rem"},input:{marginBottom:"1.5rem"},buttonWrapper:{display:"flex",justifyContent:"flex-end"}}),$e=function(e){return function(t){var a=t.target.value;e(a)}},Qe=function(){var e=Ze(),t=S(),a=t.isAuthenticated,c=t.submitNewPassword,o=Object(n.useState)(""),i=Object(u.a)(o,2),l=i[0],p=i[1],f=Object(n.useState)(""),g=Object(u.a)(f,2),O=g[0],j=g[1],v=Object(n.useState)(""),y=Object(u.a)(v,2),N=y[0],w=y[1],k=Object(n.useState)(""),C=Object(u.a)(k,2),_=C[0],D=C[1],x=Object(n.useState)(""),I=Object(u.a)(x,2),P=I[0],A=I[1],L=Object(n.useState)(""),T=Object(u.a)(L,2),W=T[0],R=T[1];return a()?r.a.createElement(s.a,{to:"workspace"}):r.a.createElement("div",{className:e.wrapper},r.a.createElement(b.a,{className:e.header,variant:"h4",component:"h1",color:"textPrimary"},"Change password"),r.a.createElement("div",{className:e.errorWrapper},P?r.a.createElement(b.a,{variant:"body1",component:"p",color:"error"},P):r.a.createElement(b.a,{className:e.successMessage,variant:"body1",component:"p"},W)),r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault(),P&&A(""),W&&R(""),N===_?c(l,O,N).then((function(){p(""),j(""),w(""),D(""),R("Your password has been changed successfully")})).catch((function(e){A(e.message)})):A("Passwords do not match")}},r.a.createElement(E.a,{className:e.input,label:"E-MAIL",type:"email",value:l,onChange:$e(p),InputProps:{startAdornment:r.a.createElement(d.a,{position:"start"},r.a.createElement(X.a,null))},required:!0}),r.a.createElement(E.a,{className:e.input,label:"VERIFICATION CODE",type:"number",value:O,onChange:$e(j),InputProps:{startAdornment:r.a.createElement(d.a,{position:"start"},r.a.createElement(Ve.a,null))},required:!0}),r.a.createElement(E.a,{className:e.input,label:"NEW PASSWORD",type:"password",value:N,onChange:$e(w),InputProps:{startAdornment:r.a.createElement(d.a,{position:"start"},r.a.createElement(h.a,null))},required:!0}),r.a.createElement(E.a,{className:e.input,label:"CONFIRM NEW PASSWORD",type:"password",value:_,onChange:$e(D),InputProps:{startAdornment:r.a.createElement(d.a,{position:"start"},r.a.createElement(h.a,null))},required:!0}),r.a.createElement("div",{className:e.buttonWrapper},r.a.createElement(m.a,{type:"submit",variant:"contained",color:"primary"},"Change password"))))};a(340);var et=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(H,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/signup",component:V}),r.a.createElement(s.b,{exact:!0,path:"/signin",component:ee}),r.a.createElement(s.b,{exact:!0,path:"/confirm-email",component:P}),r.a.createElement(s.b,{exact:!0,path:"/forgot-password",component:Ke}),r.a.createElement(s.b,{exact:!0,path:"/new-password",component:Qe}),r.a.createElement($,{exact:!0,path:"/change-password"},r.a.createElement(x,null)),r.a.createElement($,{path:"/workspace"},r.a.createElement(Je,null)),r.a.createElement($,{path:"/"},r.a.createElement(Je,null))))},tt=a(54),at=a(208),nt=a(211),rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return Object(te.a)(Object(te.a)({},e),{},{name:e.properties.name})}))},ct={fetching:{userSpaces:!1,selectedGraph:!1,createNode:!1,updateNode:!1,deleteNode:!1,addLink:!1,deleteLink:!1},spaces:null,spacesByIds:null,selectedSpaceId:null,selectedGraph:null,orphans:null,displayedGraph:null,nodesByIds:null},ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"".concat("GET_SPACES","_PENDING"):return Object(te.a)(Object(te.a)({},e),{},{fetching:Object(te.a)(Object(te.a)({},e.fetching),{},{userSpaces:!0})});case"".concat("GET_SPACES","_FULFILLED"):var a=t.payload.spaces,n=a.reduce((function(e,t){return Object(te.a)(Object(te.a)({},e),{},Object(me.a)({},t.id,Object(te.a)({},t)))}),{});return Object(te.a)(Object(te.a)({},e),{},{spaces:a,spacesByIds:n,fetching:Object(te.a)(Object(te.a)({},e.fetching),{},{userSpaces:!1})});case"".concat("GET_SPACES","_REJECTED"):return Object(te.a)(Object(te.a)({},e),{},{fetching:Object(te.a)(Object(te.a)({},e.fetching),{},{userSpaces:!1})});case"".concat("FETCH_GRAPH_DATA","_PENDING"):return Object(te.a)(Object(te.a)({},e),{},{fetching:Object(te.a)(Object(te.a)({},e.fetching),{},{selectedGraph:!0})});case"".concat("FETCH_GRAPH_DATA","_FULFILLED"):var r=t.payload,c=r.orphans,o=Object(nt.a)(r,["orphans"]),i=o.nodes,l=rt(i),s=rt(c),u=Object(te.a)(Object(te.a)({},o),{},{nodes:l,focusedNodeId:""}),p=[].concat(Object(ae.a)(l),Object(ae.a)(s)).reduce((function(e,t){return Object(te.a)(Object(te.a)({},e),{},Object(me.a)({},t.id,Object(te.a)({},t)))}),{});return Object(te.a)(Object(te.a)({},e),{},{selectedGraph:u,orphans:s,nodesByIds:p,fetching:Object(te.a)(Object(te.a)({},e.fetching),{},{selectedGraph:!1})});case"".concat("FETCH_GRAPH_DATA","_REJECTED"):return Object(te.a)(Object(te.a)({},e),{},{fetching:Object(te.a)(Object(te.a)({},e.fetching),{},{selectedGraph:!1})});case"".concat("CREATE_NODE","_PENDING"):return Object(te.a)(Object(te.a)({},e),{},{fetching:Object(te.a)(Object(te.a)({},e.fetching),{},{createNode:!0})});case"".concat("CREATE_NODE","_FULFILLED"):case"".concat("CREATE_NODE","_REJECTED"):return Object(te.a)(Object(te.a)({},e),{},{fetching:Object(te.a)(Object(te.a)({},e.fetching),{},{createNode:!1})});case"".concat("UPDATE_NODE","_PENDING"):return Object(te.a)(Object(te.a)({},e),{},{fetching:Object(te.a)(Object(te.a)({},e.fetching),{},{updateNode:!0})});case"".concat("UPDATE_NODE","_FULFILLED"):case"".concat("UPDATE_NODE","_REJECTED"):return Object(te.a)(Object(te.a)({},e),{},{fetching:Object(te.a)(Object(te.a)({},e.fetching),{},{updateNode:!1})});case"".concat("DELETE_NODE","_PENDING"):return Object(te.a)(Object(te.a)({},e),{},{fetching:Object(te.a)(Object(te.a)({},e.fetching),{},{deleteNode:!0})});case"".concat("DELETE_NODE","_FULFILLED"):case"".concat("DELETE_NODE","_REJECTED"):return Object(te.a)(Object(te.a)({},e),{},{fetching:Object(te.a)(Object(te.a)({},e.fetching),{},{deleteNode:!1})});case"".concat("ADD_LINK","_PENDING"):return Object(te.a)(Object(te.a)({},e),{},{fetching:Object(te.a)(Object(te.a)({},e.fetching),{},{addLink:!0})});case"".concat("ADD_LINK","_FULFILLED"):case"".concat("ADD_LINK","_REJECTED"):return Object(te.a)(Object(te.a)({},e),{},{fetching:Object(te.a)(Object(te.a)({},e.fetching),{},{addLink:!1})});case"".concat("DELETE_LINK","_PENDING"):return Object(te.a)(Object(te.a)({},e),{},{fetching:Object(te.a)(Object(te.a)({},e.fetching),{},{deleteLink:!0})});case"".concat("DELETE_LINK","_FULFILLED"):case"".concat("DELETE_LINK","_REJECTED"):return Object(te.a)(Object(te.a)({},e),{},{fetching:Object(te.a)(Object(te.a)({},e.fetching),{},{deleteLink:!1})});case"".concat("SELECT_SPACE"):return Object(te.a)(Object(te.a)({},e),{},{selectedSpaceId:t.payload});default:return e}},it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type,e},lt=Object(tt.c)({appReducer:it,workspaceReducer:ot}),st=Object(tt.e)(lt,Object(tt.d)(Object(tt.a)(at.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(341);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,null,r.a.createElement(C,null,r.a.createElement(i.a,{store:st},r.a.createElement(et,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[233,1,2]]]);
//# sourceMappingURL=main.4f6e70dc.chunk.js.map