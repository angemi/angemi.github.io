(this["webpackJsonpgrapher-web"]=this["webpackJsonpgrapher-web"]||[]).push([[0],{126:function(e,t,a){e.exports=a(169)},163:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},169:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(9),o=a.n(r),i=a(35),l=a(214),u=a(217),s=a(219),d=a(54),p=a(221),E=a(220),h=a(111),m=a.n(h),f=a(110),g=a.n(f),b=Object(l.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),O=function(){var e=b();return c.a.createElement(u.a,{position:"relative"},c.a.createElement(s.a,null,c.a.createElement(E.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},c.a.createElement(g.a,null)),c.a.createElement(d.a,{align:"center",variant:"h6",className:e.title},"Grapher",c.a.createElement(m.a,{style:{marginLeft:"5px"}})),c.a.createElement(p.a,{color:"inherit"},"Login")))},_=a(6),N=a(53),y=a(17),j=a(234),v=a(227),D=a(235),k=a(230),C=a(229),w=a(228),G=a(226),T=a(115),L=a(231),A=a(232),R=a(30),P=function(e){var t=Object(i.c)();return Object.entries(e).reduce((function(e,a){var n=Object(y.a)(a,2),c=n[0],r=n[1];return Object(_.a)({},e,Object(R.a)({},c,(function(){return t(r.apply(void 0,arguments))})))}),{})},I=["INPUT","TEXTAREA"],S=function(e,t){switch(t.type){case"set-key-down":return Object(_.a)({},e,Object(R.a)({},t.key,!0));case"set-key-up":return Object(_.a)({},e,Object(R.a)({},t.key,!1));default:return e}},F=function(e,t){if(!Array.isArray(e)||!e.length)throw new Error("The first parameter to `useKeyboardShortcut` must be an array containing at least one `KeyboardEvent.key` string.");if(!t||"function"!==typeof t)throw new Error("The second parameter to `useKeyboardShortcut` must be a function that will be invoked when the keys are pressed.");var a=e.reduce((function(e,t){return Object(_.a)({},e,Object(R.a)({},t,!1))}),{}),c=Object(n.useReducer)(S,a),r=Object(y.a)(c,2),o=r[0],i=r[1],l=Object(n.useCallback)((function(t){var a=t.key,n=t.target;t.repeat||I.includes(n.tagName)||e.includes(a)&&(o[a]||i({type:"set-key-down",key:a}))}),[e,o]),u=Object(n.useCallback)((function(t){var a=t.key,n=t.target;I.includes(n.tagName)||e.includes(a)&&o[a]&&i({type:"set-key-up",key:a})}),[e,o]);Object(n.useEffect)((function(){return window.addEventListener("keydown",l,!0),function(){return window.removeEventListener("keydown",l,!0)}}),[l]),Object(n.useEffect)((function(){return window.addEventListener("keyup",u,!0),function(){return window.removeEventListener("keyup",u,!0)}}),[u]),Object(n.useEffect)((function(){Object.values(o).filter((function(e){return!e})).length||t(o)}),[t,o])},W=a(52),U=a.n(W),J="https://grapher-app.herokuapp.com/graphs/nodes",X=function(){return function(e,t){var a=U.a.get(e,{});return function(e){return e({type:"".concat(t,"_PENDING")}),a.then((function(a){var n=a.data;e({type:"".concat(t,"_FULFILLED"),payload:n})})).catch((function(a){e({type:"".concat(t,"_REJECTED"),payload:a.message})}))}}("https://grapher-app.herokuapp.com/graphs?space=20","FETCH_GRAPH_DATA")},H=function(e){return function(e,t,a){var n=U.a.post(e,a);return function(e){return e({type:"".concat(t,"_PENDING")}),n.then((function(a){var n=a.data;e({type:"".concat(t,"_FULFILLED"),payload:n})})).catch((function(a){e({type:"".concat(t,"_REJECTED"),payload:a.message})}))}}(J,"CREATE_NODE",e)},x=function(e){return function(e,t,a){var n=U.a.put(e,a);return function(e){return e({type:"".concat(t,"_PENDING")}),n.then((function(a){var n=a.data;e({type:"".concat(t,"_PENDING"),payload:n})})).catch((function(a){e({type:"".concat(t,"_REJECTED"),payload:a.message})}))}}("".concat(J,"/").concat(e.id),"UPDATE_NODE",e)},B=function(e){return function(e,t,a){var n=U.a.delete(e,Object(_.a)({},{},{},a&&Object.keys(a).length>0?{data:a}:{}));return function(e){return e({type:"".concat(t,"_PENDING"),payload:a}),n.then((function(a){var n=a.data;e({type:"".concat(t,"_FULFILLED"),payload:n})})).catch((function(a){e({type:"".concat(t,"_REJECTED"),payload:a.message})}))}}("".concat(J,"/").concat(e),"DELETE_NODE")},M=a(112),Y=function(e){var t=e.selectedGraph,a=e.graphConfig,n=e.onRightClickNode;return c.a.createElement(M.Graph,{id:"graph",className:"Workspace__Graph",data:t,config:a,onRightClickNode:n})};Y.defaultProps={selectedGraph:{nodes:[],edges:[]},graphConfig:{labelProperty:"name"}};var z=Y,K=a(224),V=a(171),Z=a(225),$=a(223),q=(a(163),function(e){var t=e.orphans,a=e.handleOpenDialog,n=e.onRightClickNode;return c.a.createElement("div",{className:"Orphanage"},c.a.createElement("div",{className:"Orphanage__actions"},c.a.createElement(p.a,{className:"Orphanage__button",onClick:a,color:"primary",variant:"contained",size:"large"},"Add node")),c.a.createElement("div",{className:"Orphanage__wrapper"},c.a.createElement(d.a,{className:"Orphanage__title",variant:"h6",noWrap:!0},"Orphanage"),c.a.createElement($.a,{className:"Orphanage__divider"}),c.a.createElement(K.a,null,(t||[]).map((function(e){var t=e.id,a=e.name;return c.a.createElement("div",{key:t,onContextMenu:function(e){return n(e,t)}},c.a.createElement(V.a,{button:!0},c.a.createElement(Z.a,{primary:a})))})))))});q.defaultProps={orphans:[]};var Q=q,ee=(a(164),{automaticRearrangeAfterDropNode:!0,minZoom:1,node:{labelProperty:"name",color:"#d3d3d3",fontColor:"black",fontSize:8,fontWeight:"normal",highlightColor:"SAME",highlightFontSize:8,highlightFontWeight:"normal",highlightStrokeColor:"SAME",highlightStrokeWidth:"SAME",mouseCursor:"pointer",opacity:1,size:500,strokeColor:"none",strokeWidth:1.5,symbolType:"circle"}}),te={mouseX:null,mouseY:null},ae=function(){var e=P({getGraphData:X,createNode:H,updateNode:x,deleteNode:B}),t=e.getGraphData,a=e.createNode,r=e.updateNode,o=e.deleteNode,l=Object(i.d)((function(e){var t=e.workspaceReducer;return{selectedGraph:t.selectedGraph,orphans:t.orphans}}),i.b),u=l.selectedGraph,s=l.orphans,E=Object(n.useState)(!1),h=Object(y.a)(E,2),m=h[0],f=h[1],g=Object(n.useState)(!1),b=Object(y.a)(g,2),O=b[0],R=b[1],I=Object(n.useState)(!1),S=Object(y.a)(I,2),W=S[0],U=S[1],J=Object(n.useState)(""),M=Object(y.a)(J,2),Y=M[0],K=M[1],V=Object(n.useState)(""),Z=Object(y.a)(V,2),$=Z[0],q=Z[1],ae=Object(n.useState)(te),ne=Object(y.a)(ae,2),ce=ne[0],re=ne[1],oe=Object(n.useState)(null),ie=Object(y.a)(oe,2),le=ie[0],ue=ie[1],se=Object(n.useCallback)(t,[]);Object(n.useEffect)((function(){se()}),[se]);var de=function(){return f(!0)},pe=function(){f(!1),K("")},Ee=function(){R(!1),K(""),ue(null)},he=function(){U(!1),q(""),ue(null)};F(["Shift","N"],(function(){m||de()}));var me=function(e){e.preventDefault();var t=e.target.value;K(t)},fe=function(e,t){e.preventDefault(),ue(t),re({mouseX:e.clientX,mouseY:e.clientY})};return c.a.createElement(G.a,{container:!0,className:"Workspace",spacing:0},c.a.createElement(G.a,{item:!0,xs:9},c.a.createElement(v.a,{id:"Workspace__Graph-wrapper",className:"Workspace__Graph-wrapper",fixed:!0},u&&c.a.createElement(z,{selectedGraph:u,graphConfig:Object(_.a)({},ee,{width:document.getElementById("Workspace__Graph-wrapper").offsetWidth,height:document.getElementById("Workspace__Graph-wrapper").offsetHeight}),onRightClickNode:fe})),c.a.createElement(D.a,{open:m,onClose:pe,"aria-labelledby":"form-dialog-title"},c.a.createElement(w.a,{id:"form-dialog-title"},"Create new node"),c.a.createElement(C.a,null,c.a.createElement(A.a,{margin:"dense",id:"name",label:"Node name",fullWidth:!0,onChange:me})),c.a.createElement(k.a,null,c.a.createElement(p.a,{onClick:function(){var e=Object(j.a)();a({id:e,properties:{name:Y,space:"20"}}).then((function(){se(),K(""),pe()}))},color:"primary",disabled:!Y},"Add node"),c.a.createElement(p.a,{onClick:pe},"Cancel"))),c.a.createElement(D.a,{open:O,onClose:pe,"aria-labelledby":"form-dialog-title"},c.a.createElement(w.a,{id:"form-dialog-title"},"Edit node"),c.a.createElement(C.a,null,c.a.createElement(A.a,{margin:"dense",id:"name",label:"Node name",fullWidth:!0,onChange:me})),c.a.createElement(k.a,null,c.a.createElement(p.a,{onClick:function(){var e=u.nodes,t=[].concat(Object(N.a)(e),Object(N.a)(s)).find((function(e){return e.id===le})),a=t.id,n=t.properties,c={id:a,properties:Object(_.a)({},n,{name:Y})};r(c).then((function(){se(),Ee()}))},color:"primary",disabled:!Y},"Update"),c.a.createElement(p.a,{onClick:Ee},"Cancel"))),c.a.createElement(D.a,{open:W,onClose:he,"aria-labelledby":"form-dialog-title"},c.a.createElement(w.a,{id:"form-dialog-title"},"Delete node"),c.a.createElement(C.a,null,c.a.createElement(d.a,{variant:"body1"},"Do you want to delete node ",c.a.createElement("strong",null,$),"?")),c.a.createElement(k.a,null,c.a.createElement(p.a,{onClick:function(){o(le).then((function(){se(),he()}))},color:"primary"},"Delete"),c.a.createElement(p.a,{onClick:he},"Cancel")))),c.a.createElement(G.a,{className:"Workspace__Graph-wrapper",item:!0,xs:3},c.a.createElement(Q,{orphans:s,handleOpenDialog:de,onRightClickNode:fe})),c.a.createElement(T.a,{keepMounted:!0,open:null!==ce.mouseY,onClose:function(){re(te),ue(null)},anchorReference:"anchorPosition",anchorPosition:null!==ce.mouseY&&null!==ce.mouseX?{top:ce.mouseY,left:ce.mouseX}:void 0},c.a.createElement(L.a,{onClick:function(){re(te),R(!0)}},"Edit node"),c.a.createElement(L.a,{onClick:function(){var e=u.nodes,t=[].concat(Object(N.a)(e),Object(N.a)(s)).find((function(e){return e.id===le})).name;q(t),re(te),U(!0)}},"Delete node")))};a(165);var ne=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(O,null),c.a.createElement(ae,null))},ce=a(27),re=a(114),oe=a(116),ie={fetching:{selectedGraph:!1,createNode:!1,updateNode:!1,deleteNode:!1},selectedGraph:null,orphans:null,displayedGraph:null},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"".concat("FETCH_GRAPH_DATA","_PENDING"):return Object(_.a)({},e,{fetching:Object(_.a)({},e.fetching,{selectedGraph:!0})});case"".concat("FETCH_GRAPH_DATA","_FULFILLED"):var a=t.payload,n=a.orphans,c=Object(oe.a)(a,["orphans"]),r=c.nodes,o=Object(_.a)({},c,{nodes:r.map((function(e){return Object(_.a)({},e,{name:e.properties.name})})),focusedNodeId:""});return Object(_.a)({},e,{selectedGraph:o,orphans:n.map((function(e){return Object(_.a)({},e,{name:e.properties.name})})),fetching:Object(_.a)({},e.fetching,{selectedGraph:!1})});case"".concat("FETCH_GRAPH_DATA","_REJECTED"):return Object(_.a)({},e,{fetching:Object(_.a)({},e.fetching,{selectedGraph:!1})});case"".concat("CREATE_NODE","_PENDING"):return Object(_.a)({},e,{fetching:Object(_.a)({},e.fetching,{createNode:!0})});case"".concat("CREATE_NODE","_FULFILLED"):case"".concat("CREATE_NODE","_REJECTED"):return Object(_.a)({},e,{fetching:Object(_.a)({},e.fetching,{createNode:!1})});case"".concat("UPDATE_NODE","_PENDING"):return Object(_.a)({},e,{fetching:Object(_.a)({},e.fetching,{updateNode:!0})});case"".concat("UPDATE_NODE","_FULFILLED"):case"".concat("UPDATE_NODE","_REJECTED"):return Object(_.a)({},e,{fetching:Object(_.a)({},e.fetching,{updateNode:!1})});case"".concat("DELETE_NODE","_PENDING"):return Object(_.a)({},e,{fetching:Object(_.a)({},e.fetching,{deleteNode:!0})});case"".concat("DELETE_NODE","_FULFILLED"):case"".concat("DELETE_NODE","_REJECTED"):return Object(_.a)({},e,{fetching:Object(_.a)({},e.fetching,{deleteNode:!1})});default:return e}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type,e},se=Object(ce.c)({appReducer:ue,workspaceReducer:le}),de=Object(ce.e)(se,Object(ce.d)(Object(ce.a)(re.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(166);o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(i.a,{store:de},c.a.createElement(ne,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[126,1,2]]]);
//# sourceMappingURL=main.1451871c.chunk.js.map