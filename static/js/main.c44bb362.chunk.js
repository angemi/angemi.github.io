(this["webpackJsonpgrapher-web"]=this["webpackJsonpgrapher-web"]||[]).push([[0],{134:function(e,t,a){e.exports=a(177)},171:function(e,t,a){},172:function(e,t,a){},173:function(e,t,a){},174:function(e,t,a){},177:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(10),o=a.n(r),i=a(41),l=a(221),u=a(224),d=a(226),s=a(59),p=a(228),E=a(227),f=a(115),h=a.n(f),m=a(114),b=a.n(m),O=Object(l.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),g=function(){var e=O();return c.a.createElement(u.a,{position:"relative"},c.a.createElement(d.a,null,c.a.createElement(E.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},c.a.createElement(b.a,null)),c.a.createElement(s.a,{align:"center",variant:"h6",className:e.title},"Grapher",c.a.createElement(h.a,{style:{marginLeft:"5px"}})),c.a.createElement(p.a,{color:"inherit"},"Login")))},j=a(3),_=a(25),k=a(14),N=a(243),y=a(234),D=a(244),v=a(240),C=a(236),L=a(235),w=a(233),T=a(246),I=a(119),G=a(239),A=a(245),R=a(241),P=a(22),S=function(e){var t=Object(i.c)();return Object.entries(e).reduce((function(e,a){var n=Object(k.a)(a,2),c=n[0],r=n[1];return Object(j.a)(Object(j.a)({},e),{},Object(P.a)({},c,(function(){return t(r.apply(void 0,arguments))})))}),{})},F=["INPUT","TEXTAREA"],W=function(e,t){switch(t.type){case"set-key-down":return Object(j.a)(Object(j.a)({},e),{},Object(P.a)({},t.key,!0));case"set-key-up":return Object(j.a)(Object(j.a)({},e),{},Object(P.a)({},t.key,!1));default:return e}},U=function(e,t){if(!Array.isArray(e)||!e.length)throw new Error("The first parameter to `useKeyboardShortcut` must be an array containing at least one `KeyboardEvent.key` string.");if(!t||"function"!==typeof t)throw new Error("The second parameter to `useKeyboardShortcut` must be a function that will be invoked when the keys are pressed.");var a=e.reduce((function(e,t){return Object(j.a)(Object(j.a)({},e),{},Object(P.a)({},t,!1))}),{}),c=Object(n.useReducer)(W,a),r=Object(k.a)(c,2),o=r[0],i=r[1],l=Object(n.useCallback)((function(t){var a=t.key,n=t.target;t.repeat||F.includes(n.tagName)||e.includes(a)&&(o[a]||i({type:"set-key-down",key:a}))}),[e,o]),u=Object(n.useCallback)((function(t){var a=t.key,n=t.target;F.includes(n.tagName)||e.includes(a)&&o[a]&&i({type:"set-key-up",key:a})}),[e,o]);Object(n.useEffect)((function(){return window.addEventListener("keydown",l,!0),function(){return window.removeEventListener("keydown",l,!0)}}),[l]),Object(n.useEffect)((function(){return window.addEventListener("keyup",u,!0),function(){return window.removeEventListener("keyup",u,!0)}}),[u]),Object(n.useEffect)((function(){Object.values(o).filter((function(e){return!e})).length||t(o)}),[t,o])},X=a(58),J=a.n(X),B=function(e,t,a){var n=J.a.post(e,a);return function(e){return e({type:"".concat(t,"_PENDING")}),n.then((function(a){var n=a.data;e({type:"".concat(t,"_FULFILLED"),payload:n})})).catch((function(a){e({type:"".concat(t,"_REJECTED"),payload:a.message})}))}},K=function(e,t,a){var n=J.a.delete(e,Object(j.a)(Object(j.a)({},{}),a&&Object.keys(a).length>0?{data:a}:{}));return function(e){return e({type:"".concat(t,"_PENDING"),payload:a}),n.then((function(a){var n=a.data;e({type:"".concat(t,"_FULFILLED"),payload:n})})).catch((function(a){e({type:"".concat(t,"_REJECTED"),payload:a.message})}))}},Y="https://grapher-app.herokuapp.com/graphs/nodes",H="https://grapher-app.herokuapp.com/graphs/links",x=function(){return function(e,t){var a=J.a.get(e,{});return function(e){return e({type:"".concat(t,"_PENDING")}),a.then((function(a){var n=a.data;e({type:"".concat(t,"_FULFILLED"),payload:n})})).catch((function(a){e({type:"".concat(t,"_REJECTED"),payload:a.message})}))}}("https://grapher-app.herokuapp.com/graphs?space=20","FETCH_GRAPH_DATA")},M=function(e){return B(Y,"CREATE_NODE",e)},z=function(e){return function(e,t,a){var n=J.a.put(e,a);return function(e){return e({type:"".concat(t,"_PENDING")}),n.then((function(a){var n=a.data;e({type:"".concat(t,"_PENDING"),payload:n})})).catch((function(a){e({type:"".concat(t,"_REJECTED"),payload:a.message})}))}}("".concat(Y,"/").concat(e.id),"UPDATE_NODE",e)},V=function(e){return K("".concat(Y,"/").concat(e),"DELETE_NODE")},Z=function(e){return B(H,"ADD_LINK",e)},$=function(e){return K("".concat(H,"/").concat(e),"DELETE_LINK")},q=a(116),Q=function(e){var t=e.selectedGraph,a=e.graphConfig,n=e.onRightClickNode,r=e.onRightClickLink;return c.a.createElement(q.Graph,{id:"graph",className:"Workspace__Graph",data:t,config:a,onRightClickNode:n,onRightClickLink:r})};Q.defaultProps={selectedGraph:{nodes:[],edges:[]},graphConfig:{labelProperty:"name"}};var ee=Q,te=a(231),ae=a(179),ne=a(232),ce=a(230),re=(a(171),function(e){var t=e.orphans,a=e.handleOpenDialog,n=e.onRightClickNode;return c.a.createElement("div",{className:"Orphanage"},c.a.createElement("div",{className:"Orphanage__actions"},c.a.createElement(p.a,{className:"Orphanage__button",onClick:a,color:"primary",variant:"contained",size:"large"},"Add node")),c.a.createElement("div",{className:"Orphanage__wrapper"},c.a.createElement(s.a,{className:"Orphanage__title",variant:"h6",noWrap:!0},"Orphanage"),c.a.createElement(ce.a,{className:"Orphanage__divider"}),c.a.createElement(te.a,null,(t||[]).map((function(e){var t=e.id,a=e.name;return c.a.createElement("div",{key:t,onContextMenu:function(e){return n(e,t)}},c.a.createElement(ae.a,{button:!0},c.a.createElement(ne.a,{primary:a})))})))))});re.defaultProps={orphans:[]};var oe=re,ie=(a(172),{automaticRearrangeAfterDropNode:!0,minZoom:1,node:{labelProperty:"name",color:"#d3d3d3",fontColor:"black",fontSize:8,fontWeight:"normal",highlightColor:"SAME",highlightFontSize:8,highlightFontWeight:"normal",highlightStrokeColor:"SAME",highlightStrokeWidth:"SAME",mouseCursor:"pointer",opacity:1,size:500,strokeColor:"none",strokeWidth:1.5,symbolType:"circle"}}),le={mouseX:null,mouseY:null},ue=function(){var e=S({getGraphData:x,createNode:M,updateNode:z,deleteNode:V,addLink:Z,deleteLink:$}),t=e.getGraphData,a=e.createNode,r=e.updateNode,o=e.deleteNode,l=e.addLink,u=e.deleteLink,d=Object(i.d)((function(e){var t=e.workspaceReducer;return{selectedGraph:t.selectedGraph,orphans:t.orphans,nodesByIds:t.nodesByIds,fetching:t.fetching}}),i.b),E=d.selectedGraph,f=d.orphans,h=d.nodesByIds,m=d.fetching,b=Object(n.useState)(!1),O=Object(k.a)(b,2),g=O[0],P=O[1],F=Object(n.useState)(!1),W=Object(k.a)(F,2),X=W[0],J=W[1],B=Object(n.useState)(!1),K=Object(k.a)(B,2),Y=K[0],H=K[1],q=Object(n.useState)(!1),Q=Object(k.a)(q,2),te=Q[0],ae=Q[1],ne=Object(n.useState)(""),ce=Object(k.a)(ne,2),re=ce[0],ue=ce[1],de=Object(n.useState)(""),se=Object(k.a)(de,2),pe=se[0],Ee=se[1],fe=Object(n.useState)(""),he=Object(k.a)(fe,2),me=he[0],be=he[1],Oe=Object(n.useState)(le),ge=Object(k.a)(Oe,2),je=ge[0],_e=ge[1],ke=Object(n.useState)(le),Ne=Object(k.a)(ke,2),ye=Ne[0],De=Ne[1],ve=Object(n.useState)(null),Ce=Object(k.a)(ve,2),Le=Ce[0],we=Ce[1],Te=Object(n.useState)(null),Ie=Object(k.a)(Te,2),Ge=Ie[0],Ae=Ie[1],Re=E||{},Pe=Re.nodes,Se=void 0===Pe?[]:Pe,Fe=Re.links,We=void 0===Fe?[]:Fe,Ue=Object(n.useCallback)(t,[]);Object(n.useEffect)((function(){Ue()}),[Ue]);var Xe=function(){return P(!0)},Je=function(){P(!1),Ee("")},Be=function(){J(!1),Ee(""),we(null)},Ke=function(){H(!1),be(""),we(null)},Ye=function(){_e(le),ae(!0)},He=function(){ae(!1),we(""),Ae(""),ue("")};U(["Shift","N"],(function(){g||Xe()}));var xe,Me,ze=function(e){e.preventDefault();var t=e.target.value;Ee(t)},Ve=function(e,t){e.preventDefault(),we(t),_e({mouseX:e.clientX,mouseY:e.clientY})};return c.a.createElement(w.a,{container:!0,className:"Workspace",spacing:0},c.a.createElement(w.a,{item:!0,xs:9},c.a.createElement(y.a,{id:"Workspace__Graph-wrapper",className:"Workspace__Graph-wrapper",fixed:!0},E&&c.a.createElement(ee,{selectedGraph:E,graphConfig:Object(j.a)(Object(j.a)({},ie),{},{width:document.getElementById("Workspace__Graph-wrapper").offsetWidth,height:document.getElementById("Workspace__Graph-wrapper").offsetHeight}),onRightClickNode:Ve,onRightClickLink:function(e,t,a){e.preventDefault();var n=We.find((function(e){return e.source===t&&e.target===a})),c=n.id,r=n.target,o=n.source;Ae(c),we(o),ue(r),De({mouseX:e.clientX,mouseY:e.clientY})}})),c.a.createElement(D.a,{open:te,onClose:He,"aria-labelledby":"form-dialog-title"},c.a.createElement(L.a,{id:"form-dialog-title"},Ge?"Delete link":"Create new link"),c.a.createElement(C.a,null,c.a.createElement(T.a,{id:"Workspace__source-node-select"},"Source node: "),c.a.createElement(R.a,{labelId:"Workspace__source-node-select",className:"Workspace__add-link-select",value:Le,disabled:!0},[].concat(Object(_.a)(Se),Object(_.a)(f||[])).map((function(e){var t=e.id,a=e.name;return c.a.createElement(G.a,{key:t,value:t},a)}))),c.a.createElement(T.a,{id:"Workspace__target-node-select"},"Target node: "),c.a.createElement(R.a,{className:"Workspace__add-link-select",labelId:"Workspace__target-node-select",value:re,onChange:function(e){var t=e.target.value;ue(t)},disabled:!!Ge},(xe=Se,Me=Le,xe.filter((function(e){return e.id!==Me}))).map((function(e){var t=e.id,a=e.name;return c.a.createElement(G.a,{key:t,value:t},a)})))),c.a.createElement(v.a,null,Ge?c.a.createElement(p.a,{onClick:function(){u(Ge).then((function(){Ue(),He()}))},color:"primary",disabled:m.deleteLink},"Confirm"):c.a.createElement(p.a,{onClick:function(){var e=Object(N.a)();l({id:e,source:Le,target:re,properties:{space:"20",type:"API"}}).then((function(){Ue(),He()}))},color:"primary",disabled:!re||m.addLink},"Add link"),c.a.createElement(p.a,{onClick:He},"Cancel"))),c.a.createElement(D.a,{open:g,onClose:Je,"aria-labelledby":"form-dialog-title"},c.a.createElement(L.a,{id:"form-dialog-title"},"Create new node"),c.a.createElement(C.a,null,c.a.createElement(A.a,{margin:"dense",id:"name",label:"Node name",fullWidth:!0,onChange:ze})),c.a.createElement(v.a,null,c.a.createElement(p.a,{onClick:function(){a({properties:{name:pe,space:"20"}}).then((function(){Ue(),Ee(""),Je()}))},color:"primary",disabled:!pe||m.createNode},"Add node"),c.a.createElement(p.a,{onClick:Je},"Cancel"))),c.a.createElement(D.a,{open:X,onClose:Je,"aria-labelledby":"form-dialog-title"},c.a.createElement(L.a,{id:"form-dialog-title"},"Edit node"),c.a.createElement(C.a,null,c.a.createElement(A.a,{margin:"dense",id:"name",label:"Node name",value:pe,fullWidth:!0,onChange:ze})),c.a.createElement(v.a,null,c.a.createElement(p.a,{onClick:function(){var e=E.nodes,t=[].concat(Object(_.a)(e),Object(_.a)(f)).find((function(e){return e.id===Le})),a=t.id,n=t.properties,c={id:a,properties:Object(j.a)(Object(j.a)({},n),{},{name:pe})};r(c).then((function(){Ue(),Be()}))},color:"primary",disabled:!pe||m.updateNode},"Update"),c.a.createElement(p.a,{onClick:Be},"Cancel"))),c.a.createElement(D.a,{open:Y,onClose:Ke,"aria-labelledby":"form-dialog-title"},c.a.createElement(L.a,{id:"form-dialog-title"},"Delete node"),c.a.createElement(C.a,null,c.a.createElement(s.a,{variant:"body1"},"Do you want to delete node ",c.a.createElement("strong",null,me),"?")),c.a.createElement(v.a,null,c.a.createElement(p.a,{onClick:function(){o(Le).then((function(){Ue(),Ke()}))},color:"primary"},"Delete"),c.a.createElement(p.a,{onClick:Ke},"Cancel")))),c.a.createElement(w.a,{className:"Workspace__Graph-wrapper",item:!0,xs:3},c.a.createElement(oe,{orphans:f,handleOpenDialog:Xe,onRightClickNode:Ve})),c.a.createElement(I.a,{keepMounted:!0,open:null!==je.mouseY,onClose:function(){_e(le),we(null)},anchorReference:"anchorPosition",anchorPosition:null!==je.mouseY&&null!==je.mouseX?{top:je.mouseY,left:je.mouseX}:void 0},c.a.createElement(G.a,{onClick:Ye},"Add Link"),c.a.createElement(G.a,{onClick:function(){var e=h[Le].name;_e(le),Ee(e),J(!0)}},"Edit node"),c.a.createElement(G.a,{onClick:function(){var e=E.nodes,t=[].concat(Object(_.a)(e),Object(_.a)(f)).find((function(e){return e.id===Le})).name;be(t),_e(le),H(!0)}},"Delete node")),c.a.createElement(I.a,{keepMounted:!0,open:null!==ye.mouseY,onClose:function(){De(le),Ae(null)},anchorReference:"anchorPosition",anchorPosition:null!==ye.mouseY&&null!==ye.mouseX?{top:ye.mouseY,left:ye.mouseX}:void 0},c.a.createElement(G.a,{onClick:function(){De(le),Ye()}},"Delete Link")))};a(173);var de=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(g,null),c.a.createElement(ue,null))},se=a(32),pe=a(118),Ee=a(120),fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{name:e.properties.name})}))},he={fetching:{selectedGraph:!1,createNode:!1,updateNode:!1,deleteNode:!1,addLink:!1,deleteLink:!1},selectedGraph:null,orphans:null,displayedGraph:null,nodesByIds:null},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"".concat("FETCH_GRAPH_DATA","_PENDING"):return Object(j.a)(Object(j.a)({},e),{},{fetching:Object(j.a)(Object(j.a)({},e.fetching),{},{selectedGraph:!0})});case"".concat("FETCH_GRAPH_DATA","_FULFILLED"):var a=t.payload,n=a.orphans,c=Object(Ee.a)(a,["orphans"]),r=c.nodes,o=fe(r),i=fe(n),l=Object(j.a)(Object(j.a)({},c),{},{nodes:o,focusedNodeId:""}),u=[].concat(Object(_.a)(o),Object(_.a)(i)).reduce((function(e,t){return Object(j.a)(Object(j.a)({},e),{},Object(P.a)({},t.id,Object(j.a)({},t)))}),{});return Object(j.a)(Object(j.a)({},e),{},{selectedGraph:l,orphans:i,nodesByIds:u,fetching:Object(j.a)(Object(j.a)({},e.fetching),{},{selectedGraph:!1})});case"".concat("FETCH_GRAPH_DATA","_REJECTED"):return Object(j.a)(Object(j.a)({},e),{},{fetching:Object(j.a)(Object(j.a)({},e.fetching),{},{selectedGraph:!1})});case"".concat("CREATE_NODE","_PENDING"):return Object(j.a)(Object(j.a)({},e),{},{fetching:Object(j.a)(Object(j.a)({},e.fetching),{},{createNode:!0})});case"".concat("CREATE_NODE","_FULFILLED"):case"".concat("CREATE_NODE","_REJECTED"):return Object(j.a)(Object(j.a)({},e),{},{fetching:Object(j.a)(Object(j.a)({},e.fetching),{},{createNode:!1})});case"".concat("UPDATE_NODE","_PENDING"):return Object(j.a)(Object(j.a)({},e),{},{fetching:Object(j.a)(Object(j.a)({},e.fetching),{},{updateNode:!0})});case"".concat("UPDATE_NODE","_FULFILLED"):case"".concat("UPDATE_NODE","_REJECTED"):return Object(j.a)(Object(j.a)({},e),{},{fetching:Object(j.a)(Object(j.a)({},e.fetching),{},{updateNode:!1})});case"".concat("DELETE_NODE","_PENDING"):return Object(j.a)(Object(j.a)({},e),{},{fetching:Object(j.a)(Object(j.a)({},e.fetching),{},{deleteNode:!0})});case"".concat("DELETE_NODE","_FULFILLED"):case"".concat("DELETE_NODE","_REJECTED"):return Object(j.a)(Object(j.a)({},e),{},{fetching:Object(j.a)(Object(j.a)({},e.fetching),{},{deleteNode:!1})});case"".concat("ADD_LINK","_PENDING"):return Object(j.a)(Object(j.a)({},e),{},{fetching:Object(j.a)(Object(j.a)({},e.fetching),{},{addLink:!0})});case"".concat("ADD_LINK","_FULFILLED"):case"".concat("ADD_LINK","_REJECTED"):return Object(j.a)(Object(j.a)({},e),{},{fetching:Object(j.a)(Object(j.a)({},e.fetching),{},{addLink:!1})});case"".concat("DELETE_LINK","_PENDING"):return Object(j.a)(Object(j.a)({},e),{},{fetching:Object(j.a)(Object(j.a)({},e.fetching),{},{deleteLink:!0})});case"".concat("DELETE_LINK","_FULFILLED"):case"".concat("DELETE_LINK","_REJECTED"):return Object(j.a)(Object(j.a)({},e),{},{fetching:Object(j.a)(Object(j.a)({},e.fetching),{},{deleteLink:!1})});default:return e}},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type,e},Oe=Object(se.c)({appReducer:be,workspaceReducer:me}),ge=Object(se.e)(Oe,Object(se.d)(Object(se.a)(pe.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(174);o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(i.a,{store:ge},c.a.createElement(de,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[134,1,2]]]);
//# sourceMappingURL=main.c44bb362.chunk.js.map